
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Navigation Calculations Module &#8212; Navtools 2021.06.01 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Route Planning Application" href="planning.html" />
    <link rel="prev" title="Overview" href="introduction.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="navigation-calculations-module">
<h1>Navigation Calculations Module<a class="headerlink" href="#navigation-calculations-module" title="Permalink to this headline">¶</a></h1>
<p>The <code class="xref py py-mod docutils literal notranslate"><span class="pre">navigation</span></code> module computes range and bearing between two points.
It leverages the <code class="xref py py-mod docutils literal notranslate"><span class="pre">igrf11</span></code> module to compute compass bearing from
true bearing.</p>
<p>See the Aviation Formulary: <a class="reference external" href="http://edwilliams.org/avform147.htm">http://edwilliams.org/avform147.htm</a></p>
<p>Also see <a class="reference external" href="http://www.movable-type.co.uk/scripts/latlong.html">http://www.movable-type.co.uk/scripts/latlong.html</a>, © 2002-2010 Chris Veness</p>
<section id="distance-bearing-calculation">
<span id="calc-range-bearing"></span><h2>Distance/Bearing Calculation<a class="headerlink" href="#distance-bearing-calculation" title="Permalink to this headline">¶</a></h2>
<p>These are based on the equirectangular approximation for distance.
This the loxodrome or rhumb line.</p>
<p>See <a class="reference external" href="http://edwilliams.org/avform147.htm#flat">http://edwilliams.org/avform147.htm#flat</a>.</p>
<p>Generally,
the <span class="math notranslate nohighlight">\(\phi\)</span> values are N-S latitude, and <span class="math notranslate nohighlight">\(\lambda\)</span> values are E-W longitude.</p>
<p>This means <span class="math notranslate nohighlight">\((\phi_0, \lambda_0)\)</span> and <span class="math notranslate nohighlight">\((\phi_1, \lambda_1)\)</span>
are the two points we’re navigating between.</p>
<div class="math notranslate nohighlight">
\[\begin{split}x &amp;= R \times \Delta \lambda \times \cos \frac{\Delta \phi}{2} \\
y &amp;= R \times \Delta \phi \\
d &amp;= \sqrt{x^2 + y^2}\end{split}\]</div>
<p>We <em>could</em> fine-tune this with <span class="math notranslate nohighlight">\(R_y\)</span> and <span class="math notranslate nohighlight">\(R_x\)</span> radius
of curvature values. We don’t need answers closer than 10%, so we skip this.</p>
<div class="math notranslate nohighlight">
\[\begin{split}R_y &amp;= a \times \frac{1-e^2}{\bigl(1 - e^2 \times \sin(\phi_0)^2\bigr)^\frac{3}{2}} \\
R_x &amp;= a \times \frac{1}{\sqrt{1 - e^2 \times \sin(\phi_0)^2}}\end{split}\]</div>
<p>Where</p>
<p><code class="docutils literal notranslate"><span class="pre">a</span></code> is the equatorial radius of the earth:</p>
<ul class="simple">
<li><p>a=6378.137000 km for WGS84</p></li>
<li><p>a=3958.761 miles</p></li>
<li><p>a=3440.069 nautical miles, but 180*60/pi is more useful.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">e^2=f*(2-f)</span></code> with the flattening, f=1/298.257223563 for WGS84.</p>
<div class="math notranslate nohighlight">
\[e^2 = f\times(2-f) = 0.0066943799901413165\]</div>
<p>The bearing, <span class="math notranslate nohighlight">\(\theta\)</span> is given by this formula.</p>
<div class="math notranslate nohighlight">
\[\theta = \arctan \frac{x} {y} \mod 2 \pi\]</div>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>Suppose point 1 is LAX: (33deg 57min N, 118deg 24min W)
Suppose point 2 is JFK: (40deg 38min N,  73deg 47min W)
d = 0.629650 radians = 2164.6 nm
theta = 1.384464 radians = 79.32 degrees</p>
<p>Conversely,
2164.6nm (0.629650 radians) on a rhumbline course of 79.3 degrees (1.384464 radians) starting at LAX
should arrive at JFK.</p>
</section>
</section>
<section id="destination-calculation">
<span id="calc-destination"></span><h2>Destination Calculation<a class="headerlink" href="#destination-calculation" title="Permalink to this headline">¶</a></h2>
<p>This is the direct Rhumb-line formula.
From <span class="math notranslate nohighlight">\((\phi_1, \lambda_1)\)</span> in direction <span class="math notranslate nohighlight">\(\theta\)</span> for distance <span class="math notranslate nohighlight">\(d\)</span>.</p>
<p>Generally,
the <span class="math notranslate nohighlight">\(\phi\)</span> values are N-S latitude, and <span class="math notranslate nohighlight">\(\lambda\)</span> values are E-W longitude.</p>
<p>The steps:</p>
<ol class="arabic">
<li><p>Compute new latitude.</p>
<div class="math notranslate nohighlight">
\[\phi_d =  \phi_1 + d \cos \theta\]</div>
</li>
<li><p>Sanity Check.</p>
<div class="math notranslate nohighlight">
\[\lvert \phi_d \rvert \leq \frac{\pi}{2}\]</div>
</li>
<li><p>How much northing? Too little? We’re on an E-W line and a simplification avoids
a fraction with terms near zero. A lot? We’re not an a simple E-W line.</p>
<div class="math notranslate nohighlight">
\[\begin{split}q = \begin{cases}
\cos \phi_1 &amp;\textbf{if $\lvert \phi_d - \phi_1 \rvert &lt; \sqrt{\epsilon}$} \\
\phi_d - \phi_1 / \log {\dfrac{\tan(\tfrac{\phi_d}{2}+\tfrac{\pi}{4})}{\tan(\tfrac{\phi_1}{2}+\tfrac{\pi}{4})}}  &amp;\textbf{otherwise}
\end{cases}\end{split}\]</div>
</li>
<li><p>Compute new Longitude</p>
<div class="math notranslate nohighlight">
\[\begin{split}\Delta \lambda &amp;= d \times \frac{\sin(\theta)}{q} \\
\lambda_d &amp;= (\lambda_1 + \Delta \lambda + \pi \mod 2\pi) - \pi\end{split}\]</div>
</li>
</ol>
</section>
<section id="module-navtools.navigation">
<span id="implementation"></span><h2>Implementation<a class="headerlink" href="#module-navtools.navigation" title="Permalink to this headline">¶</a></h2>
<p>This module computes ranges and bearings between points.
It also inverts this and computes a point from a point, range, and bearing.
It leverages the <code class="xref py py-mod docutils literal notranslate"><span class="pre">igrf11</span></code> module to compute compass bearing from
true bearing.</p>
<p>A “rhumb line” (or loxodrome) is a path of constant bearing, which
crosses all meridians at the same angle. This is a simplified, flat-earth
model that side-steps the more sophisticated haversine-based approach.</p>
<p>Sailors navigate along rhumb lines because
it is easier to follow a constant compass bearing than to be continually
adjusting the bearing to follow a great circle. Rhumb
lines are straight lines on a chart that uses the Mercator projection.</p>
<p>Rhumb lines are generally longer than great-circle (orthodrome) routes.
For instance, London to New York is 4% longer along a rhumb line than
along a great circle; whiile this is important for aviation fuel, it is not
particularly important for sailing vessels.</p>
<section id="navigation-module-design">
<h3>Navigation Module Design<a class="headerlink" href="#navigation-module-design" title="Permalink to this headline">¶</a></h3>
<p>The <code class="xref py py-mod docutils literal notranslate"><span class="pre">navigation</span></code> module contains domain objects and calculations.
The domain objects include the following:</p>
<ul class="simple">
<li><p>A coordinate point (<a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><code class="xref py py-class docutils literal notranslate"><span class="pre">LatLon</span></code></a>) is a pair of angles,
<span class="math notranslate nohighlight">\((lat, lon)\)</span>.  Each of these values is an <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a>.</p></li>
<li><p>The angle definition (<a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a>, <a class="reference internal" href="#navtools.navigation.Lat" title="navtools.navigation.Lat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lat</span></code></a>, and <a class="reference internal" href="#navtools.navigation.Lon" title="navtools.navigation.Lon"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lon</span></code></a>)
includes the various format conversions from human
friendly notations in degrees, minutes, seconds with hemisphere.
It also includes formatting into these human-friendly notations.</p></li>
</ul>
<p>A central design question is the packaging of the calculations
themselves.  There are two choices:</p>
<ul class="simple">
<li><p>Stand-alone functions.</p></li>
<li><p>Methods of the <a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><code class="xref py py-class docutils literal notranslate"><span class="pre">LatLon</span></code></a> class.</p></li>
</ul>
<p>We have a handy range-bearing function, <span class="math notranslate nohighlight">\(R(p_1, p_2)\)</span> which
is a composition of two elements: distance, <span class="math notranslate nohighlight">\(d\)</span>, and bearing, <span class="math notranslate nohighlight">\(\theta\)</span>.</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}\begin{split}d( p_1, p_2 ), &amp;\text{ distance from $p_1$ to $p_2$}\\
\theta( p_1, p_2 ), &amp;\text{ bearing from $p_1$ to $p_2$}\end{split}\\R( p_1, p_2 ) = \Bigl( d( p_1, p_2 ), \theta( p_1, p_2 ) \Bigr)\end{aligned}\end{align} \]</div>
<p>The destination function, <span class="math notranslate nohighlight">\(D( p_1, d, \theta )\)</span>, has (almost) two parts, also.
It can also be seen as a single object, which is a coordinate pair.</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}\begin{split}D_{\phi}( p_1, d, \theta ), &amp;\text{ latitude at distance $d$, angle $\theta$ from $p_1$}\\
D_{\lambda}( p_1, d, \theta ), &amp;\text{ longitude at distance $d$, angle $\theta$ from $p_1$}\end{split}\\D( p_1, d, \theta ) = \Bigl( D_{\phi}( p_1, d, \theta ), D_{\lambda}( p_1, d, \theta ) \Bigr)\end{aligned}\end{align} \]</div>
<p>Stand-alone functions like these fit the mathematical definitions in a simple
and precise way.  The code would look like the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">distance_bearing</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
</pre></div>
</div>
<p>This is an apt summary of what we’re doing.</p>
<p>The alternative, method functions of the <a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><code class="xref py py-class docutils literal notranslate"><span class="pre">LatLon</span></code></a> class, have a
problem in clarity.  The arguments to the function are textually
separated by the method name, like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">p1</span><span class="o">.</span><span class="n">distance_bearing</span><span class="p">(</span><span class="n">p2</span><span class="p">)</span>
</pre></div>
</div>
<p>With this syntax, the coordinates <code class="docutils literal notranslate"><span class="pre">p1</span></code> and <code class="docutils literal notranslate"><span class="pre">p2</span></code> lose the obvious “peer” relationship
For this reason, the various calculations are implemented as
stand-alone functions, not method functions of the <a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><code class="xref py py-class docutils literal notranslate"><span class="pre">LatLon</span></code></a> class.</p>
</section>
<section id="problem-domain-objects">
<h3>Problem Domain Objects<a class="headerlink" href="#problem-domain-objects" title="Permalink to this headline">¶</a></h3>
<p>An essential feature of the navigation calculations is that Latitude
and Longitude are actually angles.  They appear (on a Mercator chart) to be
planar Cartesian coordinates, but they’re actually a pair of angles measured
from the center of the earth.</p>
<p>A point on the surface has two angles: latitude is the angle
normal to the equator and longitude is the angle normal to the
Greenwich meridian, parallel to the equator.</p>
<p>Note that lines of longitude converge at the poles.</p>
<section id="angle">
<h4>Angle<a class="headerlink" href="#angle" title="Permalink to this headline">¶</a></h4>
<p>Fundamentally, the calculations we’re interested in,
<a class="reference internal" href="#navtools.navigation.range_bearing" title="navtools.navigation.range_bearing"><code class="xref py py-func docutils literal notranslate"><span class="pre">range_bearing()</span></code></a> and <a class="reference internal" href="#navtools.navigation.destination" title="navtools.navigation.destination"><code class="xref py py-func docutils literal notranslate"><span class="pre">destination()</span></code></a>, work
with radians.  An <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> is a signed radians number,
an extension to built-in <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>.</p>
<p>Our source and target presentations
are various kinds of Degree-Minute-Second values.
The <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> class includes a number of conversion and parsing
features.</p>
<p>Generally, we create an <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> from one of these sources:</p>
<ul>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>: create an <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> from a floating-point value in degrees.
The <code class="xref py py-meth docutils literal notranslate"><span class="pre">fromdegrees()</span></code> static method does this.</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">string</span></code>: attempts a number of DMS conversions.
The <code class="xref py py-meth docutils literal notranslate"><span class="pre">fromstring()</span></code> static method does this.</p>
<p>This is implemented via the separate <a class="reference internal" href="#navtools.navigation.AngleParser" title="navtools.navigation.AngleParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">AngleParser</span></code></a> object.
We can extend the parsing without actually changing the base <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> class.
Formats include <code class="docutils literal notranslate"><span class="pre">dd</span> <span class="pre">mm</span> <span class="pre">ss.sss</span></code>, <code class="docutils literal notranslate"><span class="pre">dd</span> <span class="pre">mm.mmm</span></code>, <code class="docutils literal notranslate"><span class="pre">dd.dddd</span></code>, and
<code class="docutils literal notranslate"><span class="pre">dd\xbcdd.ddd</span></code> from GPX files.</p>
</li>
<li><p><a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a>: This is the ordinary <code class="docutils literal notranslate"><span class="pre">Angle(someangle)</span></code> which will
use a value which is expressed in radians.</p></li>
</ul>
<p>There are two subclasses of representations for those angles:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#navtools.navigation.Lat" title="navtools.navigation.Lat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lat</span></code></a> – Latitude – with a 0°-90° range and a sign expressed as “N” or “S”.</p></li>
<li><p><a class="reference internal" href="#navtools.navigation.Lon" title="navtools.navigation.Lon"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lon</span></code></a> – Longitude – with a 0°-180° range and a sign expressed as “E” or “W”.</p></li>
</ul>
<p>This works nicely because the complex features are related to formatting and parsing.
The rest of the life of a <a class="reference internal" href="#navtools.navigation.Lat" title="navtools.navigation.Lat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lat</span></code></a> or <a class="reference internal" href="#navtools.navigation.Lon" title="navtools.navigation.Lon"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lon</span></code></a> is merely as a float value of signed radians.</p>
<p>Note that the subclasses of <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> have narrowly-defined contexts:</p>
<ul class="simple">
<li><p>Latitude is an angle from the equator, hemisphere is “N” or “S”. Range is 0 to 90.</p></li>
<li><p>Longitude is an angle from the prime meridian, hemisphere is “E” or “W”. Range is 0 to 180.</p></li>
</ul>
<p>There are other angles, which are not constrained by the Lat and Lon rules.
These are simply float values.</p>
</section>
<section id="angleparser">
<h4>AngleParser<a class="headerlink" href="#angleparser" title="Permalink to this headline">¶</a></h4>
<p>The <a class="reference internal" href="#navtools.navigation.AngleParser" title="navtools.navigation.AngleParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">AngleParser</span></code></a> class is used to parse a input string values. We try four
distinct formats. The value returned, ultimately, is a signed degree value.</p>
<p>This class is used by the <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> class to parse a string.
See <a class="reference internal" href="#navtools.navigation.Angle.fromstring" title="navtools.navigation.Angle.fromstring"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Angle.fromstring()</span></code></a>. These are implemented separately to
make it slightly easier to add angle parsing features without breaking
the fundamental definition of the <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> class.</p>
<p>It’s possible to create a slight generalization to the parsing
approach. If we use <code class="docutils literal notranslate"><span class="pre">r&quot;(?P&lt;d&gt;...)(?P&lt;m&gt;...)...&quot;</span></code> then a pattern will
have some combination of groups named ‘d’, ‘m’ and ‘s’.  We can then
use code like <code class="docutils literal notranslate"><span class="pre">float(m.groupdict('0').get('m'))</span></code> to get a value, or supply ‘0’
as a default.</p>
<p>Doing this would allow us to step through a sequence of regular expressions
looking for a match.</p>
<p>Note that the parser for a generic <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a>  handles the hemisphere even
though it isn’t really meaningful for the abstract superclass.
These should be introduced by the <a class="reference internal" href="#navtools.navigation.Lat" title="navtools.navigation.Lat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lat</span></code></a> and <a class="reference internal" href="#navtools.navigation.Lon" title="navtools.navigation.Lon"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lon</span></code></a> classes.
But, it seems simpler to push it up the parent class.</p>
</section>
<section id="latlon">
<h4>LatLon<a class="headerlink" href="#latlon" title="Permalink to this headline">¶</a></h4>
<p>This pair of angles defines a point on the surface of a sphere.
The essential problem-domain object is the “point”: a (lat, lon) pair.
The main applications will create points from input sources.</p>
<p>Once we have <a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><code class="xref py py-class docutils literal notranslate"><span class="pre">LatLon</span></code></a> objects, we can apply calculations
to determine range and bearing. We can sum the ranges to compute
distance traveled and do other useful things.</p>
</section>
</section>
<section id="globals">
<h3>Globals<a class="headerlink" href="#globals" title="Permalink to this headline">¶</a></h3>
<p>We have several global values that are used to determine the units
for range calculations.</p>
<dl class="py data">
<dt class="sig sig-object py" id="navtools.navigation.NM">
<span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">NM</span></span><a class="headerlink" href="#navtools.navigation.NM" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean radius of the earth in nautical miles.
This is the default;  ranges and bearings are in nautical miles.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="navtools.navigation.MI">
<span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">MI</span></span><a class="headerlink" href="#navtools.navigation.MI" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean radius of the earth in statute miles.</p>
</dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="navtools.navigation.KM">
<span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">KM</span></span><a class="headerlink" href="#navtools.navigation.KM" title="Permalink to this definition">¶</a></dt>
<dd><p>Mean radius of the earth in kilometers.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="navtools.navigation.AngleParser">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">AngleParser</span></span><a class="headerlink" href="#navtools.navigation.AngleParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a sting representation of a latitude or longitude.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">AngleParser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&quot;76.123N&quot;</span><span class="p">)</span>
<span class="go">76.123</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AngleParser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&quot;76.123S&quot;</span><span class="p">)</span>
<span class="go">-76.123</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AngleParser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&quot;Due North&quot;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Cannot parse &#39;Due North&#39;</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.AngleParser.dms_pat">
<span class="sig-name descname"><span class="pre">dms_pat</span></span><em class="property"> <span class="pre">=</span> <span class="pre">re.compile('(\\d+)\\D+(\\d+)\\D+(\\d+)[^NEWSnews]*([NEWSnews]?)')</span></em><a class="headerlink" href="#navtools.navigation.AngleParser.dms_pat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.AngleParser.dm_pat">
<span class="sig-name descname"><span class="pre">dm_pat</span></span><em class="property"> <span class="pre">=</span> <span class="pre">re.compile('(\\d+)\\D+(\\d+\\.\\d+)[^NEWSnews]*([NEWSnews]?)')</span></em><a class="headerlink" href="#navtools.navigation.AngleParser.dm_pat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.AngleParser.d_pat">
<span class="sig-name descname"><span class="pre">d_pat</span></span><em class="property"> <span class="pre">=</span> <span class="pre">re.compile('(\\d+\\.\\d+)[^NEWSnews]*([NEWSnews]?)')</span></em><a class="headerlink" href="#navtools.navigation.AngleParser.d_pat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.AngleParser.sign">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">sign</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">txt</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">int</span><a class="headerlink" href="#navtools.navigation.AngleParser.sign" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.AngleParser.parse">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">float</span><a class="headerlink" href="#navtools.navigation.AngleParser.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses a text value, returning signed degrees as a float value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> – text to parse</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>float degrees or a <code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code> exception.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.AngleParser.__dict__">
<span class="sig-name descname"><span class="pre">__dict__</span></span><em class="property"> <span class="pre">=</span> <span class="pre">mappingproxy({'__module__':</span> <span class="pre">'navtools.navigation',</span> <span class="pre">'__doc__':</span> <span class="pre">'Parse</span> <span class="pre">a</span> <span class="pre">sting</span> <span class="pre">representation</span> <span class="pre">of</span> <span class="pre">a</span> <span class="pre">latitude</span> <span class="pre">or</span> <span class="pre">longitude.\n\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">AngleParser.parse(&quot;76.123N&quot;)\n</span>&#160;&#160;&#160; <span class="pre">76.123\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">AngleParser.parse(&quot;76.123S&quot;)\n</span>&#160;&#160;&#160; <span class="pre">-76.123\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">AngleParser.parse(&quot;Due</span> <span class="pre">North&quot;)</span> <span class="pre">#</span> <span class="pre">doctest:</span> <span class="pre">+ELLIPSIS\n</span>&#160;&#160;&#160; <span class="pre">Traceback</span> <span class="pre">(most</span> <span class="pre">recent</span> <span class="pre">call</span> <span class="pre">last):\n</span>&#160;&#160;&#160; <span class="pre">...\n</span>&#160;&#160;&#160; <span class="pre">ValueError:</span> <span class="pre">Cannot</span> <span class="pre">parse</span> <span class="pre">\'Due</span> <span class="pre">North\'\n</span>&#160;&#160;&#160; <span class="pre">',</span> <span class="pre">'dms_pat':</span> <span class="pre">re.compile('(\\d+)\\D+(\\d+)\\D+(\\d+)[^NEWSnews]*([NEWSnews]?)'),</span> <span class="pre">'dm_pat':</span> <span class="pre">re.compile('(\\d+)\\D+(\\d+\\.\\d+)[^NEWSnews]*([NEWSnews]?)'),</span> <span class="pre">'d_pat':</span> <span class="pre">re.compile('(\\d+\\.\\d+)[^NEWSnews]*([NEWSnews]?)'),</span> <span class="pre">'sign':</span> <span class="pre">&lt;staticmethod</span> <span class="pre">object&gt;,</span> <span class="pre">'parse':</span> <span class="pre">&lt;staticmethod</span> <span class="pre">object&gt;,</span> <span class="pre">'__dict__':</span> <span class="pre">&lt;attribute</span> <span class="pre">'__dict__'</span> <span class="pre">of</span> <span class="pre">'AngleParser'</span> <span class="pre">objects&gt;,</span> <span class="pre">'__weakref__':</span> <span class="pre">&lt;attribute</span> <span class="pre">'__weakref__'</span> <span class="pre">of</span> <span class="pre">'AngleParser'</span> <span class="pre">objects&gt;,</span> <span class="pre">'__annotations__':</span> <span class="pre">{}})</span></em><a class="headerlink" href="#navtools.navigation.AngleParser.__dict__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.AngleParser.__module__">
<span class="sig-name descname"><span class="pre">__module__</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'navtools.navigation'</span></em><a class="headerlink" href="#navtools.navigation.AngleParser.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.AngleParser.__weakref__">
<span class="sig-name descname"><span class="pre">__weakref__</span></span><a class="headerlink" href="#navtools.navigation.AngleParser.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="navtools.navigation.Angle">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">Angle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#navtools.navigation.Angle" title="Permalink to this definition">¶</a></dt>
<dd><p>A signed angle in radians; the superclass for Lat and Lon.
These are relative to the equator or the prime meridian.
In that sense, they aren’t completely generic angles; they’re restricted in their
meaning.</p>
<p>Currently, we extend float. This leads to the following</p>
<blockquote>
<div><p>DeprecationWarning: Angle.__float__ returned non-float (type Angle).
The ability to return an instance of a strict subclass of float is deprecated,
and may be removed in a future version of Python.</p>
</div></blockquote>
<p>This suggests we need to switch to a separate class that implements <code class="docutils literal notranslate"><span class="pre">numbers.Real</span></code>.
This would “wrap” the internal <code class="docutils literal notranslate"><span class="pre">float</span></code> object.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Angle</span><span class="p">(</span><span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Angle</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">cast</span><span class="p">(</span><span class="n">Angle</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>
    <span class="n">etc</span><span class="o">.</span>
</pre></div>
</div>
<p>This class has lots of conversions to DMS.
A subclass can treat the sign (“h”) as the hemisphere,
using “N”, “S”, “E”, or “W”. Lat uses “N”/”S”, Lon uses “E”/”W”.</p>
<p>Note that we have to “prettify” some values to
remove annoying 10E-16 noise bits that arise sometimes.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Angle</span><span class="p">(</span><span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="go">-0.524</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">radians</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="go">-0.524</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="go">-30.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">sdeg</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="go">-30.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="go">-30.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">dm</span>
<span class="go">(-30, 0.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">dms</span>
<span class="go">(-30, 0, 0.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">h</span>
<span class="go">&#39;-&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">r</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="go">-0.524</span>
</pre></div>
</div>
<p># Formmatter.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fmt</span><span class="p">,</span> <span class="n">prop</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">_rewrite</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%02.0d</span><span class="s2">° %2.5m&#39;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fmt</span>
<span class="go">&quot;{d:02.0f}° {m:2.5f}&#39;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
<span class="go">[&#39;d&#39;, &#39;m&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;Lat: {0:</span><span class="si">%02.0d</span><span class="s2">° %6.3m&#39;}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">&quot;Lat: 30°  0.000&#39;&quot;</span>
</pre></div>
</div>
<p># Another round-off test.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a2</span> <span class="o">=</span> <span class="n">Angle</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">12</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a2</span><span class="o">.</span><span class="n">dms</span>
<span class="go">(15, 0, 0.0)</span>
</pre></div>
</div>
<p># Math.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">a2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="go">-0.2618</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">((</span><span class="n">a</span><span class="o">+</span><span class="n">a2</span><span class="p">)</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">-15.0</span>
</pre></div>
</div>
<p>We define the core numeric object special methods, all of which simply appeal to the superclass
methods for the implementation. The results create new <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> objects,
otherwise, we behave just like a <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.Angle.parser">
<span class="sig-name descname"><span class="pre">parser</span></span><a class="headerlink" href="#navtools.navigation.Angle.parser" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#navtools.navigation.AngleParser" title="navtools.navigation.AngleParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">navtools.navigation.AngleParser</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.fromdegrees">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">fromdegrees</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deg</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hemisphere</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.fromdegrees" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> from a numeric value,
which must be degrees.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>deg</strong> – numeric degrees value.</p></li>
<li><p><strong>hemisphere</strong> – sign value, which can be encoded as
“N”, “S”, “E”, or “W”. If omitted, it’s positive.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> object.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">fromdegrees</span><span class="p">(</span><span class="mi">45</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">0.7854</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">fromdegrees</span><span class="p">(</span><span class="mf">23.456</span><span class="p">,</span> <span class="s2">&quot;N&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">0.4094</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.fromstring">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">fromstring</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.fromstring" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> from a string value,
which must be represent degrees, either as a simple
string value, or as a more complex value recognized by
the <a class="reference internal" href="#navtools.navigation.AngleParser" title="navtools.navigation.AngleParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">AngleParser</span></code></a> class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>deg</strong> – string degrees value.</p></li>
<li><p><strong>hemisphere</strong> – sign value, which can be encoded as
“N”, “S”, “E”, or “W”. If omitted, it’s positive.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> object.</p>
</dd>
</dl>
<p>We start by assuming the text value is simply
a string representation of a float.
If it isn’t, we use the <a class="reference internal" href="#navtools.navigation.AngleParser" title="navtools.navigation.AngleParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">AngleParser</span></code></a> class to parse the string.</p>
<p>A subclass might change the <a class="reference internal" href="#navtools.navigation.Angle.parser" title="navtools.navigation.Angle.parser"><code class="xref py py-data docutils literal notranslate"><span class="pre">parser</span></code></a> reference to use a different parser.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a0</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s2">&quot;-77.4325&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a0</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="go">-77.4325</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a1</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s2">&quot;37°28&#39;8</span><span class="se">\&quot;</span><span class="s2">N&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a1</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="go">37.4689</span>
</pre></div>
</div>
<p>Note use of prime and double-prime which are preferred over ‘ and “</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a2</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s2">&quot;77°25′57″W&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a2</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="go">-77.4325</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Angle.radians">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">radians</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#navtools.navigation.Angle.radians" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Angle.r">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">r</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#navtools.navigation.Angle.r" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Angle.degrees">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">degrees</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#navtools.navigation.Angle.degrees" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Angle.sdeg">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">sdeg</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#navtools.navigation.Angle.sdeg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Angle.deg">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">deg</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#navtools.navigation.Angle.deg" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Angle.dm">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dm</span></span><em class="property"><span class="pre">:</span> <span class="pre">tuple</span></em><a class="headerlink" href="#navtools.navigation.Angle.dm" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the angle as (D, M).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(d, m) tuple of signed values</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Angle.dms">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dms</span></span><em class="property"><span class="pre">:</span> <span class="pre">tuple</span></em><a class="headerlink" href="#navtools.navigation.Angle.dms" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the angle as (D, M, S).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(d, m, s) tuple of signed values</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Angle.h">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">h</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#navtools.navigation.Angle.h" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#navtools.navigation.Angle.h" title="navtools.navigation.Angle.h"><code class="xref py py-meth docutils literal notranslate"><span class="pre">h()</span></code></a> property is the sign; the “hemisphere”.
A subclass like <a class="reference internal" href="#navtools.navigation.Lat" title="navtools.navigation.Lat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lat</span></code></a> and <a class="reference internal" href="#navtools.navigation.Lon" title="navtools.navigation.Lon"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lon</span></code></a> will
override this to provide a string instead of an int value.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.Angle.spec_pat">
<span class="sig-name descname"><span class="pre">spec_pat</span></span><em class="property"> <span class="pre">=</span> <span class="pre">re.compile('%([0-9\\.#\\+</span> <span class="pre">-]*)([dmshr])')</span></em><a class="headerlink" href="#navtools.navigation.Angle.spec_pat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.Angle.formatter">
<span class="sig-name descname"><span class="pre">formatter</span></span><em class="property"> <span class="pre">=</span> <span class="pre">&lt;string.Formatter</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#navtools.navigation.Angle.formatter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle._rewrite">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">_rewrite</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">tuple</span><a class="headerlink" href="#navtools.navigation.Angle._rewrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrites a “%x” spec into a “{x:fmt}” format.
Returns the revised format at the set of properties
used.</p>
<p>There are several variant cases where we want
different kinds of display values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">%d</span> <span class="pre">%m</span> <span class="pre">%s</span></code> means that degrees and minutes are integer values.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%d</span> <span class="pre">%m</span></code> means that degrees is an int and m is a float.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%d</span></code> means that degrees is a float.</p></li>
</ul>
<p>To make this work, we note the pattern of  <code class="docutils literal notranslate"><span class="pre">{'d',</span> <span class="pre">'m',</span> <span class="pre">'s'}</span></code>, or <code class="docutils literal notranslate"><span class="pre">{'d',</span> <span class="pre">'m'}</span></code>, or <code class="docutils literal notranslate"><span class="pre">{'d'}</span></code>
and determine the appropriate mix of int or float values to include.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__format__">
<span class="sig-name descname"><span class="pre">__format__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">str</span><a class="headerlink" href="#navtools.navigation.Angle.__format__" title="Permalink to this definition">¶</a></dt>
<dd><p>Formatted string representation of an Angle.</p>
<p>The specification uses a number of <code class="docutils literal notranslate"><span class="pre">%{fmt}{prop}</span></code> items. The <code class="docutils literal notranslate"><span class="pre">{fmt}</span></code> is a floating-point
style specification, for example <code class="docutils literal notranslate"><span class="pre">03.0</span></code>.  The <code class="docutils literal notranslate"><span class="pre">{prop}</span></code> is the
property name:  <code class="docutils literal notranslate"><span class="pre">%d</span></code>, <code class="docutils literal notranslate"><span class="pre">%m</span></code> and <code class="docutils literal notranslate"><span class="pre">%s</span></code> to show
degrees, minutes, and seconds. Additional properties include <code class="docutils literal notranslate"><span class="pre">%r</span></code>
to show radians and <code class="docutils literal notranslate"><span class="pre">%h</span></code> to show the hemisphere (“N”, “S”, “E”, or “W” are
representations of the sign).</p>
<p>This can lead to a fairly complex format specifications.
A format request can look like this: <code class="docutils literal notranslate"><span class="pre">&quot;Lat:</span> <span class="pre">{0:%02d°</span> <span class="pre">%06.3m'}&quot;.format(lat)</span></code>
Or perhaps this: <code class="docutils literal notranslate"><span class="pre">&quot;({0:%.5d},</span> <span class="pre">{1:%.5d})&quot;.format(lat,</span> <span class="pre">lon)</span></code></p>
<p>We have an internal function, <a class="reference internal" href="#navtools.navigation.Angle._rewrite" title="navtools.navigation.Angle._rewrite"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_rewrite()</span></code></a>, which will parse a format specification
and then rebuild the format spec into something a bit more useful.
Once the format has been rewritten we can use the <code class="xref py py-class docutils literal notranslate"><span class="pre">string.Formatter</span></code>
to build the resulting output.</p>
<dl class="field-list simple">
<dt class="field-odd">Class spec</dt>
<dd class="field-odd"><p>format specification for this value.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>text representation of this <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__add__">
<span class="sig-name descname"><span class="pre">__add__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.__add__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return self+value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__sub__">
<span class="sig-name descname"><span class="pre">__sub__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.__sub__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return self-value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__mul__">
<span class="sig-name descname"><span class="pre">__mul__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.__mul__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return self*value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__truediv__">
<span class="sig-name descname"><span class="pre">__truediv__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.__truediv__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return self/value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__floordiv__">
<span class="sig-name descname"><span class="pre">__floordiv__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.__floordiv__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return self//value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__mod__">
<span class="sig-name descname"><span class="pre">__mod__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.__mod__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return self%value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__pow__">
<span class="sig-name descname"><span class="pre">__pow__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mod</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">float</span><a class="headerlink" href="#navtools.navigation.Angle.__pow__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return pow(self, value, mod).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__radd__">
<span class="sig-name descname"><span class="pre">__radd__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.__radd__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return value+self.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__rsub__">
<span class="sig-name descname"><span class="pre">__rsub__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.__rsub__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return value-self.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__rmul__">
<span class="sig-name descname"><span class="pre">__rmul__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.__rmul__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return value*self.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__rtruediv__">
<span class="sig-name descname"><span class="pre">__rtruediv__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.__rtruediv__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return value/self.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__rfloordiv__">
<span class="sig-name descname"><span class="pre">__rfloordiv__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.__rfloordiv__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return value//self.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__rmod__">
<span class="sig-name descname"><span class="pre">__rmod__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.__rmod__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return value%self.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__rpow__">
<span class="sig-name descname"><span class="pre">__rpow__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mod</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">float</span><a class="headerlink" href="#navtools.navigation.Angle.__rpow__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return pow(value, self, mod).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__abs__">
<span class="sig-name descname"><span class="pre">__abs__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.__abs__" title="Permalink to this definition">¶</a></dt>
<dd><p>abs(self)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__float__">
<span class="sig-name descname"><span class="pre">__float__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">float</span><a class="headerlink" href="#navtools.navigation.Angle.__float__" title="Permalink to this definition">¶</a></dt>
<dd><p>float(self)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__round__">
<span class="sig-name descname"><span class="pre">__round__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ndigits</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">None</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">int</span><a class="headerlink" href="#navtools.navigation.Angle.__round__" title="Permalink to this definition">¶</a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">__round__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ndigits</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">float</span></dt>
<dd><p>Return the Integral closest to x, rounding half toward even.</p>
<p>When an argument is passed, work like built-in round(x, ndigits).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__neg__">
<span class="sig-name descname"><span class="pre">__neg__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.__neg__" title="Permalink to this definition">¶</a></dt>
<dd><p>-self</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__pos__">
<span class="sig-name descname"><span class="pre">__pos__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.__pos__" title="Permalink to this definition">¶</a></dt>
<dd><p>+self</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__eq__">
<span class="sig-name descname"><span class="pre">__eq__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">bool</span><a class="headerlink" href="#navtools.navigation.Angle.__eq__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return self==value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__ne__">
<span class="sig-name descname"><span class="pre">__ne__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">bool</span><a class="headerlink" href="#navtools.navigation.Angle.__ne__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return self!=value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__le__">
<span class="sig-name descname"><span class="pre">__le__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">bool</span><a class="headerlink" href="#navtools.navigation.Angle.__le__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return self&lt;=value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__lt__">
<span class="sig-name descname"><span class="pre">__lt__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">bool</span><a class="headerlink" href="#navtools.navigation.Angle.__lt__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return self&lt;value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__ge__">
<span class="sig-name descname"><span class="pre">__ge__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">bool</span><a class="headerlink" href="#navtools.navigation.Angle.__ge__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return self&gt;=value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__gt__">
<span class="sig-name descname"><span class="pre">__gt__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">bool</span><a class="headerlink" href="#navtools.navigation.Angle.__gt__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return self&gt;value.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__dict__">
<span class="sig-name descname"><span class="pre">__dict__</span></span><em class="property"> <span class="pre">=</span> <span class="pre">mappingproxy({'__module__':</span> <span class="pre">'navtools.navigation',</span> <span class="pre">'__doc__':</span> <span class="pre">'\n</span>&#160;&#160;&#160; <span class="pre">A</span> <span class="pre">signed</span> <span class="pre">angle</span> <span class="pre">in</span> <span class="pre">radians;</span> <span class="pre">the</span> <span class="pre">superclass</span> <span class="pre">for</span> <span class="pre">Lat</span> <span class="pre">and</span> <span class="pre">Lon.\n</span>&#160;&#160;&#160; <span class="pre">These</span> <span class="pre">are</span> <span class="pre">relative</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">equator</span> <span class="pre">or</span> <span class="pre">the</span> <span class="pre">prime</span> <span class="pre">meridian.\n</span>&#160;&#160;&#160; <span class="pre">In</span> <span class="pre">that</span> <span class="pre">sense,</span> <span class="pre">they</span> <span class="pre">aren\'t</span> <span class="pre">completely</span> <span class="pre">generic</span> <span class="pre">angles;</span> <span class="pre">they\'re</span> <span class="pre">restricted</span> <span class="pre">in</span> <span class="pre">their\n</span>&#160;&#160;&#160; <span class="pre">meaning.\n\n</span>&#160;&#160;&#160; <span class="pre">Currently,</span> <span class="pre">we</span> <span class="pre">extend</span> <span class="pre">float.</span> <span class="pre">This</span> <span class="pre">leads</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">following\n\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">DeprecationWarning:</span> <span class="pre">Angle.__float__</span> <span class="pre">returned</span> <span class="pre">non-float</span> <span class="pre">(type</span> <span class="pre">Angle).\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">The</span> <span class="pre">ability</span> <span class="pre">to</span> <span class="pre">return</span> <span class="pre">an</span> <span class="pre">instance</span> <span class="pre">of</span> <span class="pre">a</span> <span class="pre">strict</span> <span class="pre">subclass</span> <span class="pre">of</span> <span class="pre">float</span> <span class="pre">is</span> <span class="pre">deprecated,\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">and</span> <span class="pre">may</span> <span class="pre">be</span> <span class="pre">removed</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">future</span> <span class="pre">version</span> <span class="pre">of</span> <span class="pre">Python.\n\n</span>&#160;&#160;&#160; <span class="pre">This</span> <span class="pre">suggests</span> <span class="pre">we</span> <span class="pre">need</span> <span class="pre">to</span> <span class="pre">switch</span> <span class="pre">to</span> <span class="pre">a</span> <span class="pre">separate</span> <span class="pre">class</span> <span class="pre">that</span> <span class="pre">implements</span> <span class="pre">``numbers.Real``.\n</span>&#160;&#160;&#160; <span class="pre">This</span> <span class="pre">would</span> <span class="pre">&quot;wrap&quot;</span> <span class="pre">the</span> <span class="pre">internal</span> <span class="pre">``float``</span> <span class="pre">object.\n\n</span>&#160;&#160;&#160; <span class="pre">::\n\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">class</span> <span class="pre">Angle(numbers.Real):\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">def</span> <span class="pre">__init__(self,</span> <span class="pre">value:</span> <span class="pre">float)</span> <span class="pre">-&gt;</span> <span class="pre">None:\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">self.value</span> <span class="pre">=</span> <span class="pre">value\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">def</span> <span class="pre">__add__(self,</span> <span class="pre">other:</span> <span class="pre">Any)</span> <span class="pre">-&gt;</span> <span class="pre">Angle:\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">return</span> <span class="pre">self.value</span> <span class="pre">+</span> <span class="pre">cast(Angle,</span> <span class="pre">other).value\n</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">etc.\n\n</span>&#160;&#160;&#160; <span class="pre">This</span> <span class="pre">class</span> <span class="pre">has</span> <span class="pre">lots</span> <span class="pre">of</span> <span class="pre">conversions</span> <span class="pre">to</span> <span class="pre">DMS.\n</span>&#160;&#160;&#160; <span class="pre">A</span> <span class="pre">subclass</span> <span class="pre">can</span> <span class="pre">treat</span> <span class="pre">the</span> <span class="pre">sign</span> <span class="pre">(&quot;h&quot;)</span> <span class="pre">as</span> <span class="pre">the</span> <span class="pre">hemisphere,\n</span>&#160;&#160;&#160; <span class="pre">using</span> <span class="pre">&quot;N&quot;,</span> <span class="pre">&quot;S&quot;,</span> <span class="pre">&quot;E&quot;,</span> <span class="pre">or</span> <span class="pre">&quot;W&quot;.</span> <span class="pre">Lat</span> <span class="pre">uses</span> <span class="pre">&quot;N&quot;/&quot;S&quot;,</span> <span class="pre">Lon</span> <span class="pre">uses</span> <span class="pre">&quot;E&quot;/&quot;W&quot;.\n\n</span>&#160;&#160;&#160; <span class="pre">Note</span> <span class="pre">that</span> <span class="pre">we</span> <span class="pre">have</span> <span class="pre">to</span> <span class="pre">&quot;prettify&quot;</span> <span class="pre">some</span> <span class="pre">values</span> <span class="pre">to\n</span>&#160;&#160;&#160; <span class="pre">remove</span> <span class="pre">annoying</span> <span class="pre">10E-16</span> <span class="pre">noise</span> <span class="pre">bits</span> <span class="pre">that</span> <span class="pre">arise</span> <span class="pre">sometimes.\n\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">import</span> <span class="pre">math\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">a</span> <span class="pre">=</span> <span class="pre">Angle(-math.pi/6)\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">round(a,3)\n</span>&#160;&#160;&#160; <span class="pre">-0.524\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">round(a.radians,3)\n</span>&#160;&#160;&#160; <span class="pre">-0.524\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">round(a.degrees,3)\n</span>&#160;&#160;&#160; <span class="pre">-30.0\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">round(a.sdeg,3)\n</span>&#160;&#160;&#160; <span class="pre">-30.0\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">round(a.deg,3)\n</span>&#160;&#160;&#160; <span class="pre">-30.0\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">a.dm\n</span>&#160;&#160;&#160; <span class="pre">(-30,</span> <span class="pre">0.0)\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">a.dms\n</span>&#160;&#160;&#160; <span class="pre">(-30,</span> <span class="pre">0,</span> <span class="pre">0.0)\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">a.h\n</span>&#160;&#160;&#160; <span class="pre">\'-\'\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">round(a.r,3)\n</span>&#160;&#160;&#160; <span class="pre">-0.524\n\n</span>&#160;&#160;&#160; <span class="pre">#</span> <span class="pre">Formmatter.\n\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">fmt,</span> <span class="pre">prop</span> <span class="pre">=</span> <span class="pre">Angle._rewrite(&quot;%02.0d°</span> <span class="pre">%2.5m\'&quot;)\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">fmt\n</span>&#160;&#160;&#160; <span class="pre">&quot;{d:02.0f}°</span> <span class="pre">{m:2.5f}\'&quot;\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">sorted(prop)\n</span>&#160;&#160;&#160; <span class="pre">[\'d\',</span> <span class="pre">\'m\']\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">&quot;Lat:</span> <span class="pre">{0:%02.0d°</span> <span class="pre">%6.3m\'}&quot;.format(a)\n</span>&#160;&#160;&#160; <span class="pre">&quot;Lat:</span> <span class="pre">30°</span>&#160; <span class="pre">0.000\'&quot;\n\n</span>&#160;&#160;&#160; <span class="pre">#</span> <span class="pre">Another</span> <span class="pre">round-off</span> <span class="pre">test.\n\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">a2</span> <span class="pre">=</span> <span class="pre">Angle(math.pi/12)\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">a2.dms\n</span>&#160;&#160;&#160; <span class="pre">(15,</span> <span class="pre">0,</span> <span class="pre">0.0)\n\n</span>&#160;&#160;&#160; <span class="pre">#</span> <span class="pre">Math.\n\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">round(a+a2,</span> <span class="pre">5)\n</span>&#160;&#160;&#160; <span class="pre">-0.2618\n</span>&#160;&#160;&#160; <span class="pre">&gt;&gt;&gt;</span> <span class="pre">round((a+a2).degrees,</span> <span class="pre">3)\n</span>&#160;&#160;&#160; <span class="pre">-15.0\n\n</span>&#160;&#160;&#160; <span class="pre">We</span> <span class="pre">define</span> <span class="pre">the</span> <span class="pre">core</span> <span class="pre">numeric</span> <span class="pre">object</span> <span class="pre">special</span> <span class="pre">methods,</span> <span class="pre">all</span> <span class="pre">of</span> <span class="pre">which</span> <span class="pre">simply</span> <span class="pre">appeal</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">superclass\n</span>&#160;&#160;&#160; <span class="pre">methods</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">implementation.</span> <span class="pre">The</span> <span class="pre">results</span> <span class="pre">create</span> <span class="pre">new</span> <span class="pre">:class:`Angle`</span> <span class="pre">objects,\n</span>&#160;&#160;&#160; <span class="pre">otherwise,</span> <span class="pre">we</span> <span class="pre">behave</span> <span class="pre">just</span> <span class="pre">like</span> <span class="pre">a</span> <span class="pre">:class:`float`.\n\n</span>&#160;&#160;&#160; <span class="pre">',</span> <span class="pre">'parser':</span> <span class="pre">&lt;class</span> <span class="pre">'navtools.navigation.AngleParser'&gt;,</span> <span class="pre">'fromdegrees':</span> <span class="pre">&lt;classmethod</span> <span class="pre">object&gt;,</span> <span class="pre">'fromstring':</span> <span class="pre">&lt;classmethod</span> <span class="pre">object&gt;,</span> <span class="pre">'radians':</span> <span class="pre">&lt;property</span> <span class="pre">object&gt;,</span> <span class="pre">'r':</span> <span class="pre">&lt;property</span> <span class="pre">object&gt;,</span> <span class="pre">'degrees':</span> <span class="pre">&lt;property</span> <span class="pre">object&gt;,</span> <span class="pre">'sdeg':</span> <span class="pre">&lt;property</span> <span class="pre">object&gt;,</span> <span class="pre">'deg':</span> <span class="pre">&lt;property</span> <span class="pre">object&gt;,</span> <span class="pre">'dm':</span> <span class="pre">&lt;property</span> <span class="pre">object&gt;,</span> <span class="pre">'dms':</span> <span class="pre">&lt;property</span> <span class="pre">object&gt;,</span> <span class="pre">'h':</span> <span class="pre">&lt;property</span> <span class="pre">object&gt;,</span> <span class="pre">'spec_pat':</span> <span class="pre">re.compile('%([0-9\\.#\\+</span> <span class="pre">-]*)([dmshr])'),</span> <span class="pre">'formatter':</span> <span class="pre">&lt;string.Formatter</span> <span class="pre">object&gt;,</span> <span class="pre">'_rewrite':</span> <span class="pre">&lt;classmethod</span> <span class="pre">object&gt;,</span> <span class="pre">'__format__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__format__&gt;,</span> <span class="pre">'__add__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__add__&gt;,</span> <span class="pre">'__sub__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__sub__&gt;,</span> <span class="pre">'__mul__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__mul__&gt;,</span> <span class="pre">'__truediv__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__truediv__&gt;,</span> <span class="pre">'__floordiv__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__floordiv__&gt;,</span> <span class="pre">'__mod__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__mod__&gt;,</span> <span class="pre">'__pow__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__pow__&gt;,</span> <span class="pre">'__radd__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__radd__&gt;,</span> <span class="pre">'__rsub__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__rsub__&gt;,</span> <span class="pre">'__rmul__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__rmul__&gt;,</span> <span class="pre">'__rtruediv__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__rtruediv__&gt;,</span> <span class="pre">'__rfloordiv__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__rfloordiv__&gt;,</span> <span class="pre">'__rmod__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__rmod__&gt;,</span> <span class="pre">'__rpow__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__rpow__&gt;,</span> <span class="pre">'__abs__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__abs__&gt;,</span> <span class="pre">'__float__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__float__&gt;,</span> <span class="pre">'__round__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__round__&gt;,</span> <span class="pre">'__neg__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__neg__&gt;,</span> <span class="pre">'__pos__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__pos__&gt;,</span> <span class="pre">'__eq__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__eq__&gt;,</span> <span class="pre">'__ne__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__ne__&gt;,</span> <span class="pre">'__le__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__le__&gt;,</span> <span class="pre">'__lt__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__lt__&gt;,</span> <span class="pre">'__ge__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__ge__&gt;,</span> <span class="pre">'__gt__':</span> <span class="pre">&lt;function</span> <span class="pre">Angle.__gt__&gt;,</span> <span class="pre">'__dict__':</span> <span class="pre">&lt;attribute</span> <span class="pre">'__dict__'</span> <span class="pre">of</span> <span class="pre">'Angle'</span> <span class="pre">objects&gt;,</span> <span class="pre">'__weakref__':</span> <span class="pre">&lt;attribute</span> <span class="pre">'__weakref__'</span> <span class="pre">of</span> <span class="pre">'Angle'</span> <span class="pre">objects&gt;,</span> <span class="pre">'__hash__':</span> <span class="pre">None,</span> <span class="pre">'__annotations__':</span> <span class="pre">{}})</span></em><a class="headerlink" href="#navtools.navigation.Angle.__dict__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__hash__">
<span class="sig-name descname"><span class="pre">__hash__</span></span><em class="property"> <span class="pre">=</span> <span class="pre">None</span></em><a class="headerlink" href="#navtools.navigation.Angle.__hash__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__module__">
<span class="sig-name descname"><span class="pre">__module__</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'navtools.navigation'</span></em><a class="headerlink" href="#navtools.navigation.Angle.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.Angle.__weakref__">
<span class="sig-name descname"><span class="pre">__weakref__</span></span><a class="headerlink" href="#navtools.navigation.Angle.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="navtools.navigation.Lat">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">Lat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#navtools.navigation.Lat" title="Permalink to this definition">¶</a></dt>
<dd><p>Latitude Angle, normal to the equator.</p>
<p>Hemisphere text of “N” and “S”.
Two digits as the default format for degrees.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Lat</span><span class="o">.</span><span class="n">fromdegrees</span><span class="p">(</span><span class="mf">37.1234</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">repr</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">&#39;37°07.404′N&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Lat</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;37°07.404′N&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="go">37.1234</span>
</pre></div>
</div>
<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Lat.d">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">d</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#navtools.navigation.Lat.d" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Lat.h">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">h</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#navtools.navigation.Lat.h" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#navtools.navigation.Lat.h" title="navtools.navigation.Lat.h"><code class="xref py py-meth docutils literal notranslate"><span class="pre">h()</span></code></a> property is the sign; the “hemisphere”.
A subclass like <a class="reference internal" href="#navtools.navigation.Lat" title="navtools.navigation.Lat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lat</span></code></a> and <a class="reference internal" href="#navtools.navigation.Lon" title="navtools.navigation.Lon"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lon</span></code></a> will
override this to provide a string instead of an int value.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Lat.__repr__">
<span class="sig-name descname"><span class="pre">__repr__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">str</span><a class="headerlink" href="#navtools.navigation.Lat.__repr__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return repr(self).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Lat.north">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">north</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#navtools.navigation.Lat.north" title="Permalink to this definition">¶</a></dt>
<dd><p>North latitude, positive “co-latitude”.</p>
<p>Range is 0 to pi instead of -pi/2 to +pi/2.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.Lat.__module__">
<span class="sig-name descname"><span class="pre">__module__</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'navtools.navigation'</span></em><a class="headerlink" href="#navtools.navigation.Lat.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="navtools.navigation.Lon">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">Lon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#navtools.navigation.Lon" title="Permalink to this definition">¶</a></dt>
<dd><p>Longitude Angle, parallel to the equator</p>
<p>Hemisphere text of “E” and “W”.
Three digits as the default format for degrees.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Lon</span><span class="o">.</span><span class="n">fromdegrees</span><span class="p">(</span><span class="o">-</span><span class="mf">76.5678</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">repr</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">&#39;076°34.068′W&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Lon</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;076°34.068′W&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="go">-76.5678</span>
</pre></div>
</div>
<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Lon.d">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">d</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#navtools.navigation.Lon.d" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Lon.h">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">h</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#navtools.navigation.Lon.h" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#navtools.navigation.Lon.h" title="navtools.navigation.Lon.h"><code class="xref py py-meth docutils literal notranslate"><span class="pre">h()</span></code></a> property is the sign; the “hemisphere”.
A subclass like <a class="reference internal" href="#navtools.navigation.Lat" title="navtools.navigation.Lat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lat</span></code></a> and <a class="reference internal" href="#navtools.navigation.Lon" title="navtools.navigation.Lon"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lon</span></code></a> will
override this to provide a string instead of an int value.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Lon.__repr__">
<span class="sig-name descname"><span class="pre">__repr__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">str</span><a class="headerlink" href="#navtools.navigation.Lon.__repr__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return repr(self).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Lon.east">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">east</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#navtools.navigation.Lon.east" title="Permalink to this definition">¶</a></dt>
<dd><p>East longitude. Positive only.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.Lon.__module__">
<span class="sig-name descname"><span class="pre">__module__</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'navtools.navigation'</span></em><a class="headerlink" href="#navtools.navigation.Lon.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="navtools.navigation.LatLon">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">LatLon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lat</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#navtools.navigation.Lat" title="navtools.navigation.Lat"><span class="pre">navtools.navigation.Lat</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lon</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#navtools.navigation.Lon" title="navtools.navigation.Lon"><span class="pre">navtools.navigation.Lon</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#navtools.navigation.LatLon" title="Permalink to this definition">¶</a></dt>
<dd><p>A latitude/longitude coordinate pair.
This is a glorified namedtuple with additional properties to
provide nicely-formatted results.</p>
<p>Numerous input and output conversions.</p>
<p>Output conversions as degree-minute-second, degree-minute, and degree.
We return a tuple of two strings so that the application can use
these values to populate separate spreadsheet columns.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lat</strong> – The latitude <code class="xref py py-class docutils literal notranslate"><span class="pre">lat</span></code>.</p></li>
<li><p><strong>lon</strong> – The longitude <a class="reference internal" href="#navtools.navigation.Lon" title="navtools.navigation.Lon"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lon</span></code></a>.</p></li>
<li><p><strong>dms</strong> – A pair of DMS strings.</p></li>
<li><p><strong>dm</strong> – A pair of DM strings.</p></li>
<li><p><strong>d</strong> – A pair of D strings.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lat</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#navtools.navigation.Lat" title="navtools.navigation.Lat"><span class="pre">navtools.navigation.Lat</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lon</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#navtools.navigation.Lon" title="navtools.navigation.Lon"><span class="pre">navtools.navigation.Lon</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="headerlink" href="#navtools.navigation.LatLon.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a LatLon from two values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lat</strong> – the latitude, used to build an Angle</p></li>
<li><p><strong>lon</strong> – the longitude, used to build an Angle</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.lat_dms_format">
<span class="sig-name descname"><span class="pre">lat_dms_format</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'{0:%02.0d</span> <span class="pre">%02.0m</span> <span class="pre">%04.1s%h}'</span></em><a class="headerlink" href="#navtools.navigation.LatLon.lat_dms_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.lon_dms_format">
<span class="sig-name descname"><span class="pre">lon_dms_format</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'{0:%03.0d</span> <span class="pre">%02.0m</span> <span class="pre">%04.1s%h}'</span></em><a class="headerlink" href="#navtools.navigation.LatLon.lon_dms_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.lat_dm_format">
<span class="sig-name descname"><span class="pre">lat_dm_format</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'{0:%02.0d</span> <span class="pre">%.3m%h}'</span></em><a class="headerlink" href="#navtools.navigation.LatLon.lat_dm_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.lon_dm_format">
<span class="sig-name descname"><span class="pre">lon_dm_format</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'{0:%03.0d</span> <span class="pre">%.3m%h}'</span></em><a class="headerlink" href="#navtools.navigation.LatLon.lon_dm_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.lat_d_format">
<span class="sig-name descname"><span class="pre">lat_d_format</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'{0:%06.3d%h}'</span></em><a class="headerlink" href="#navtools.navigation.LatLon.lat_d_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.lon_d_format">
<span class="sig-name descname"><span class="pre">lon_d_format</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'{0:%07.3d%h}'</span></em><a class="headerlink" href="#navtools.navigation.LatLon.lon_d_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.dms">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dms</span></span><em class="property"><span class="pre">:</span> <span class="pre">tuple</span></em><a class="headerlink" href="#navtools.navigation.LatLon.dms" title="Permalink to this definition">¶</a></dt>
<dd><p>Long Degree Minute Second format.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A pair of strings of the form <code class="samp docutils literal notranslate"><em><span class="pre">ddd</span></em> <em><span class="pre">mm</span></em> <em><span class="pre">s.s</span></em><em><span class="pre">h</span></em></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.__dict__">
<span class="sig-name descname"><span class="pre">__dict__</span></span><em class="property"> <span class="pre">=</span> <span class="pre">mappingproxy({'__module__':</span> <span class="pre">'navtools.navigation',</span> <span class="pre">'__doc__':</span> <span class="pre">'A</span> <span class="pre">latitude/longitude</span> <span class="pre">coordinate</span> <span class="pre">pair.\n</span>&#160;&#160;&#160; <span class="pre">This</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">glorified</span> <span class="pre">namedtuple</span> <span class="pre">with</span> <span class="pre">additional</span> <span class="pre">properties</span> <span class="pre">to\n</span>&#160;&#160;&#160; <span class="pre">provide</span> <span class="pre">nicely-formatted</span> <span class="pre">results.\n\n</span>&#160;&#160;&#160; <span class="pre">Numerous</span> <span class="pre">input</span> <span class="pre">and</span> <span class="pre">output</span> <span class="pre">conversions.\n\n</span>&#160;&#160;&#160; <span class="pre">Output</span> <span class="pre">conversions</span> <span class="pre">as</span> <span class="pre">degree-minute-second,</span> <span class="pre">degree-minute,</span> <span class="pre">and</span> <span class="pre">degree.\n</span>&#160;&#160;&#160; <span class="pre">We</span> <span class="pre">return</span> <span class="pre">a</span> <span class="pre">tuple</span> <span class="pre">of</span> <span class="pre">two</span> <span class="pre">strings</span> <span class="pre">so</span> <span class="pre">that</span> <span class="pre">the</span> <span class="pre">application</span> <span class="pre">can</span> <span class="pre">use\n</span>&#160;&#160;&#160; <span class="pre">these</span> <span class="pre">values</span> <span class="pre">to</span> <span class="pre">populate</span> <span class="pre">separate</span> <span class="pre">spreadsheet</span> <span class="pre">columns.\n\n</span>&#160;&#160;&#160; <span class="pre">:ivar</span> <span class="pre">lat:</span> <span class="pre">The</span> <span class="pre">latitude</span> <span class="pre">:py:class:`lat`.\n</span>&#160;&#160;&#160; <span class="pre">:ivar</span> <span class="pre">lon:</span> <span class="pre">The</span> <span class="pre">longitude</span> <span class="pre">:py:class:`Lon`.\n</span>&#160;&#160;&#160; <span class="pre">:ivar</span> <span class="pre">dms:</span> <span class="pre">A</span> <span class="pre">pair</span> <span class="pre">of</span> <span class="pre">DMS</span> <span class="pre">strings.\n</span>&#160;&#160;&#160; <span class="pre">:ivar</span> <span class="pre">dm:</span> <span class="pre">A</span> <span class="pre">pair</span> <span class="pre">of</span> <span class="pre">DM</span> <span class="pre">strings.\n</span>&#160;&#160;&#160; <span class="pre">:ivar</span> <span class="pre">d:</span> <span class="pre">A</span> <span class="pre">pair</span> <span class="pre">of</span> <span class="pre">D</span> <span class="pre">strings.\n</span>&#160;&#160;&#160; <span class="pre">',</span> <span class="pre">'__init__':</span> <span class="pre">&lt;function</span> <span class="pre">LatLon.__init__&gt;,</span> <span class="pre">'lat_dms_format':</span> <span class="pre">'{0:%02.0d</span> <span class="pre">%02.0m</span> <span class="pre">%04.1s%h}',</span> <span class="pre">'lon_dms_format':</span> <span class="pre">'{0:%03.0d</span> <span class="pre">%02.0m</span> <span class="pre">%04.1s%h}',</span> <span class="pre">'lat_dm_format':</span> <span class="pre">'{0:%02.0d</span> <span class="pre">%.3m%h}',</span> <span class="pre">'lon_dm_format':</span> <span class="pre">'{0:%03.0d</span> <span class="pre">%.3m%h}',</span> <span class="pre">'lat_d_format':</span> <span class="pre">'{0:%06.3d%h}',</span> <span class="pre">'lon_d_format':</span> <span class="pre">'{0:%07.3d%h}',</span> <span class="pre">'dms':</span> <span class="pre">&lt;property</span> <span class="pre">object&gt;,</span> <span class="pre">'dm':</span> <span class="pre">&lt;property</span> <span class="pre">object&gt;,</span> <span class="pre">'d':</span> <span class="pre">&lt;property</span> <span class="pre">object&gt;,</span> <span class="pre">'__dict__':</span> <span class="pre">&lt;attribute</span> <span class="pre">'__dict__'</span> <span class="pre">of</span> <span class="pre">'LatLon'</span> <span class="pre">objects&gt;,</span> <span class="pre">'__weakref__':</span> <span class="pre">&lt;attribute</span> <span class="pre">'__weakref__'</span> <span class="pre">of</span> <span class="pre">'LatLon'</span> <span class="pre">objects&gt;,</span> <span class="pre">'__annotations__':</span> <span class="pre">{}})</span></em><a class="headerlink" href="#navtools.navigation.LatLon.__dict__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.__module__">
<span class="sig-name descname"><span class="pre">__module__</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'navtools.navigation'</span></em><a class="headerlink" href="#navtools.navigation.LatLon.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.__weakref__">
<span class="sig-name descname"><span class="pre">__weakref__</span></span><a class="headerlink" href="#navtools.navigation.LatLon.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.dm">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dm</span></span><em class="property"><span class="pre">:</span> <span class="pre">tuple</span></em><a class="headerlink" href="#navtools.navigation.LatLon.dm" title="Permalink to this definition">¶</a></dt>
<dd><p>GPS-friendly Degree Minute format.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A pair of strings of the form <code class="samp docutils literal notranslate"><em><span class="pre">ddd</span></em> <em><span class="pre">m.mmm</span></em><em><span class="pre">h</span></em></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.d">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">d</span></span><em class="property"><span class="pre">:</span> <span class="pre">tuple</span></em><a class="headerlink" href="#navtools.navigation.LatLon.d" title="Permalink to this definition">¶</a></dt>
<dd><p>GPS-friendly Degree format.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A pair of strings of the form <code class="samp docutils literal notranslate"><em><span class="pre">ddd.ddd</span></em><em><span class="pre">h</span></em></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="navtools.navigation.range_bearing">
<span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">range_bearing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">p1</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><span class="pre">navtools.navigation.LatLon</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">p2</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><span class="pre">navtools.navigation.LatLon</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">R</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">3440.069</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">tuple</span><a class="headerlink" href="#navtools.navigation.range_bearing" title="Permalink to this definition">¶</a></dt>
<dd><p>Rhumb-line course from <code class="xref py py-data docutils literal notranslate"><span class="pre">p1</span></code> to <code class="xref py py-data docutils literal notranslate"><span class="pre">p2</span></code>.</p>
<p>See <a class="reference internal" href="#calc-range-bearing"><span class="std std-ref">Distance/Bearing Calculation</span></a>.
This is the equirectangular approximation.
Without even the minimal corrections for non-spherical Earth.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>p1</strong> – a <a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><code class="xref py py-class docutils literal notranslate"><span class="pre">LatLon</span></code></a> starting point</p></li>
<li><p><strong>p2</strong> – a <a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><code class="xref py py-class docutils literal notranslate"><span class="pre">LatLon</span></code></a> ending point</p></li>
<li><p><strong>R</strong> – radius of the earth in appropriate units;
default is nautical miles.
Values include <a class="reference internal" href="#navtools.navigation.KM" title="navtools.navigation.KM"><code class="xref py py-data docutils literal notranslate"><span class="pre">KM</span></code></a> for kilometers,
<a class="reference internal" href="#navtools.navigation.MI" title="navtools.navigation.MI"><code class="xref py py-data docutils literal notranslate"><span class="pre">MI</span></code></a> for statute miles and <a class="reference internal" href="#navtools.navigation.NM" title="navtools.navigation.NM"><code class="xref py py-data docutils literal notranslate"><span class="pre">NM</span></code></a> for nautical miles.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>2-tuple of range and bearing from p1 to p2.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="navtools.navigation.destination">
<span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">destination</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">p1</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><span class="pre">navtools.navigation.LatLon</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">range</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bearing</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">R</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">3440.069</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><span class="pre">navtools.navigation.LatLon</span></a><a class="headerlink" href="#navtools.navigation.destination" title="Permalink to this definition">¶</a></dt>
<dd><p>Rhumb line destination given point, range and bearing.</p>
<p>See <a class="reference internal" href="#calc-destination"><span class="std std-ref">Destination Calculation</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>p1</strong> – a <a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><code class="xref py py-class docutils literal notranslate"><span class="pre">LatLon</span></code></a> starting point</p></li>
<li><p><strong>range</strong> – the distiance to travel.</p></li>
<li><p><strong>bearing</strong> – the direction of travel in degrees.</p></li>
<li><p><strong>R</strong> – radius of the earth in appropriate units;
default is nautical miles.
Values include <a class="reference internal" href="#navtools.navigation.KM" title="navtools.navigation.KM"><code class="xref py py-data docutils literal notranslate"><span class="pre">KM</span></code></a> for kilometers,
<a class="reference internal" href="#navtools.navigation.MI" title="navtools.navigation.MI"><code class="xref py py-data docutils literal notranslate"><span class="pre">MI</span></code></a> for statute miles and <a class="reference internal" href="#navtools.navigation.NM" title="navtools.navigation.NM"><code class="xref py py-data docutils literal notranslate"><span class="pre">NM</span></code></a> for nautical miles.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><code class="xref py py-class docutils literal notranslate"><span class="pre">LatLon</span></code></a> with the ending point.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="navtools.navigation.declination">
<span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">declination</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">point</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><span class="pre">navtools.navigation.LatLon</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">date</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">datetime.date</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">float</span><a class="headerlink" href="#navtools.navigation.declination" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes standard declination for a given <a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><code class="xref py py-class docutils literal notranslate"><span class="pre">LatLon</span></code></a>
point.</p>
<p><a class="reference external" href="http://www.ngdc.noaa.gov/geomag/models.shtml">http://www.ngdc.noaa.gov/geomag/models.shtml</a></p>
<p><a class="reference external" href="http://www.ngdc.noaa.gov/IAGA/vmod/igrf.html">http://www.ngdc.noaa.gov/IAGA/vmod/igrf.html</a></p>
<p>See <a class="reference internal" href="igrf11.html#igrf11"><span class="std std-ref">International Geomagnetic Reference Field Module</span></a> for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>point</strong> – LatLon point</p></li>
<li><p><strong>date</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.date</span></code> in question, default is today.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>declination as a float offset to an Angle.</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="historical-archive">
<h2>Historical Archive<a class="headerlink" href="#historical-archive" title="Permalink to this headline">¶</a></h2>
<p>The original <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> and <code class="xref py py-class docutils literal notranslate"><span class="pre">GlobeAngle</span></code> classes do things which are close
to correct. They included some needless complexity, however.
They work in degrees (not radians) and implement a lot of operations that could
have been inherited from <code class="docutils literal notranslate"><span class="pre">float</span></code>.</p>
<section id="old-angle-class">
<h3>Old Angle Class<a class="headerlink" href="#old-angle-class" title="Permalink to this headline">¶</a></h3>
<p>An <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> is a signed radians number, essentially equivalent
to <code class="docutils literal notranslate"><span class="pre">float</span></code>. The operators are include the flexibility to work with
<code class="docutils literal notranslate"><span class="pre">float</span></code> values, doing coercion to <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Angle</span><span class="p">(</span> <span class="n">numbers</span><span class="o">.</span><span class="n">Real</span> <span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An Angle, with conversion from several DMS notations,</span>
<span class="sd">    as well as from radians.  The angle can be reported as</span>
<span class="sd">    degrees, a (D, M, S) tuple or as a value in radians.</span>

<span class="sd">    :ivar deg: The angle in degrees.</span>

<span class="sd">    :ivar radians: The angle in radians</span>

<span class="sd">    :ivar dm: The angle as a (D, M) tuple</span>

<span class="sd">    :ivar dms: The angle as a (D, M, S) tuple</span>

<span class="sd">    :ivar tail: Any additional text found after parsing a string value.</span>
<span class="sd">            This may be a hemisphere indication that a subclass might want to use.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dms_pat</span><span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span> <span class="sa">r</span><span class="s2">&quot;(\d+)\s+(\d+)\s+(\d+)(.*)&quot;</span> <span class="p">)</span>
    <span class="n">dm_pat</span><span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span> <span class="sa">r</span><span class="s2">&quot;(\d+)\s+(\d+\.\d+)(.*)&quot;</span> <span class="p">)</span>
    <span class="n">d_pat</span><span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span> <span class="sa">r</span><span class="s2">&quot;(\d+\.\d+)(.*)&quot;</span> <span class="p">)</span>
    <span class="n">navx_dmh_pat</span><span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span> <span class="s2">&quot;(</span><span class="se">\\</span><span class="s2">d+)</span><span class="se">\\</span><span class="s2">D+(</span><span class="se">\\</span><span class="s2">d+</span><span class="se">\\</span><span class="s2">.</span><span class="se">\\</span><span class="s2">d+)&#39;([NEWS])&quot;</span> <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">from_radians</span><span class="p">(</span> <span class="n">value</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create an Angle from radians.</span>

<span class="sd">        :param value: Angle in radians.</span>

<span class="sd">        Generally used like this::</span>

<span class="sd">            a = Angle.from_radians( float )</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="mi">180</span> <span class="o">*</span> <span class="n">value</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">value</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create an Angle from an Angle, float or string degrees.</span>

<span class="sd">        :param value: Angle in degrees as Angle, float or string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tail</span><span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="n">Angle</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">deg</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="nb">float</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="o">=</span> <span class="n">value</span>
            <span class="k">return</span>
        <span class="n">dms</span><span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">dms_pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span> <span class="n">value</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">dms</span><span class="p">:</span>
            <span class="n">d</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">dms</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span> <span class="nb">int</span><span class="p">(</span><span class="n">dms</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)),</span> <span class="nb">float</span><span class="p">(</span><span class="n">dms</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="n">m</span><span class="o">/</span><span class="mi">60</span> <span class="o">+</span> <span class="n">s</span><span class="o">/</span><span class="mi">3600</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tail</span><span class="o">=</span> <span class="n">dms</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">dm</span><span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">dm_pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span> <span class="n">value</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">dm</span><span class="p">:</span>
            <span class="n">d</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">dm</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span> <span class="nb">float</span><span class="p">(</span><span class="n">dm</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="n">m</span><span class="o">/</span><span class="mi">60</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tail</span><span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">d</span><span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">d_pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span> <span class="n">value</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">d</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tail</span><span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">navx</span><span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">navx_dmh_pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span> <span class="n">value</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">navx</span><span class="p">:</span>
            <span class="n">d</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">navx</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span> <span class="nb">float</span><span class="p">(</span><span class="n">navx</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="n">m</span><span class="o">/</span><span class="mi">60</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tail</span><span class="o">=</span> <span class="n">navx</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Cannot parse Angle </span><span class="si">{0!r}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">radians</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the angle in radians.</span>

<span class="sd">        :returns: angle in radians.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">/</span> <span class="mi">180</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dm</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the angle as (D, M).</span>

<span class="sd">        :returns: (d, m) tuple</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sign</span><span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="o">+</span><span class="mi">1</span>
        <span class="n">ad</span><span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span>
        <span class="n">d</span><span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ad</span><span class="p">)</span>
        <span class="n">ms</span><span class="o">=</span> <span class="n">ad</span><span class="o">-</span><span class="n">d</span>
        <span class="k">return</span> <span class="n">d</span><span class="o">*</span><span class="n">sign</span><span class="p">,</span> <span class="mi">60</span><span class="o">*</span><span class="n">ms</span><span class="o">*</span><span class="p">(</span><span class="n">sign</span> <span class="k">if</span> <span class="n">d</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dms</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the angle as (D, M, S).</span>

<span class="sd">        :returns: (d, m, s) tuple</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sign</span><span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="o">+</span><span class="mi">1</span>
        <span class="n">ad</span><span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span>
        <span class="n">d</span><span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ad</span><span class="p">)</span>
        <span class="n">ms</span><span class="o">=</span> <span class="mi">60</span><span class="o">*</span><span class="p">(</span><span class="n">ad</span><span class="o">-</span><span class="n">d</span><span class="p">)</span>
        <span class="n">m</span><span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ms</span><span class="p">)</span>
        <span class="n">s</span><span class="o">=</span> <span class="nb">round</span><span class="p">((</span><span class="n">ms</span><span class="o">-</span><span class="n">m</span><span class="p">)</span><span class="o">*</span><span class="mi">60</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">d</span><span class="o">*</span><span class="n">sign</span><span class="p">,</span> <span class="n">m</span><span class="o">*</span><span class="p">(</span><span class="n">sign</span> <span class="k">if</span> <span class="n">d</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span><span class="p">),</span> <span class="n">s</span><span class="o">*</span><span class="p">(</span><span class="n">sign</span> <span class="k">if</span> <span class="n">d</span><span class="o">==</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">m</span><span class="o">==</span><span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Angle( </span><span class="si">{0.deg!r}</span><span class="s2"> )&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{0.deg:7.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="n">Angle</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span> <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="nb">float</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">+</span> <span class="n">other</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="n">Angle</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span> <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="nb">float</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">-</span> <span class="n">other</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="n">Angle</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span> <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="nb">float</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">*</span> <span class="n">other</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">def</span> <span class="nf">__div__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="n">Angle</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">/</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span> <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="nb">float</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">/</span> <span class="n">other</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__div__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">)</span>
    <span class="k">def</span> <span class="fm">__floordiv__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="n">Angle</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">//</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span> <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="nb">float</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">//</span> <span class="n">other</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">def</span> <span class="fm">__mod__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="n">Angle</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">%</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span> <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="nb">float</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">%</span> <span class="n">other</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="fm">__abs__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span> <span class="p">)</span>
    <span class="k">def</span> <span class="fm">__float__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span>
    <span class="k">def</span> <span class="nf">__trunc__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="n">trunc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span> <span class="p">)</span>
    <span class="k">def</span> <span class="nf">__ceil__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="p">)</span> <span class="p">)</span>
    <span class="k">def</span> <span class="nf">__floor__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="p">)</span> <span class="p">)</span>
    <span class="k">def</span> <span class="fm">__round__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">ndigits</span> <span class="p">):</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="nb">round</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="mi">0</span> <span class="p">)</span> <span class="p">)</span>
    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="p">)</span>
    <span class="k">def</span> <span class="fm">__pos__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span>
    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span>
    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span>
    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span>
    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span>
    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span>
    <span class="k">def</span> <span class="fm">__pow__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="o">**</span><span class="n">other</span> <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">+</span><span class="bp">self</span>
    <span class="k">def</span> <span class="nf">__rdiv__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">def</span> <span class="fm">__rfloordiv__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">def</span> <span class="fm">__rmod__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">*</span><span class="bp">self</span>
    <span class="k">def</span> <span class="fm">__rpow__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">def</span> <span class="fm">__rtruediv__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>
</pre></div>
</div>
</section>
<section id="old-globeangle-class">
<h3>Old GlobeAngle Class<a class="headerlink" href="#old-globeangle-class" title="Permalink to this headline">¶</a></h3>
<p>We need to extend the simple <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> to include globe hemisphere
information so that the simple angle (in degrees or radians)
can be parsed and presented in proper N, S, E and W hemisphere
notation.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This doesn’t handle signs properly.</p>
<p>Note that we do not handle sign well as a conversion from a string.
This is because this angle is axis-independent.  Since it isn’t
aware of being a longitude or a latitude, it doesn’t know which
hemisphere code to use.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">GlobeAngle</span><span class="p">(</span> <span class="n">Angle</span> <span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An Angle which includes hemisphere information: N, S, E or W.</span>

<span class="sd">    :ivar deg: The angle in degrees.</span>

<span class="sd">    :ivar radians: The angle in radians</span>

<span class="sd">    :ivar dm: The angle as a (D, M) tuple</span>

<span class="sd">    :ivar dms: The angle as a (D, M, S, H) tuple</span>

<span class="sd">    :ivar hemi: The hemisphere (&quot;N&quot;, &quot;S&quot;, &quot;E&quot; or &quot;W&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_hemisphere</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">hemi</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">None</span> <span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">hemi</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hemi</span><span class="o">=</span> <span class="n">hemi</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">hemi</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hemi</span><span class="o">=</span> <span class="n">hemi</span><span class="p">[</span><span class="mi">0</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Cannot parse GlobeAngle</span><span class="si">{0!r}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">debug</span><span class="p">)</span> <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">hemi</span><span class="o">=</span><span class="kc">None</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a GlobeAngle from an GlobeAngle, Angle or float degrees.</span>
<span class="sd">        This will delegate construction to Angle for parsing the</span>
<span class="sd">        various strings that could be present. An Angle string may</span>
<span class="sd">        include a &quot;tail&quot; of N, S, E or W, making the hemisphere</span>
<span class="sd">        irrelevant.</span>

<span class="sd">        :param value: Angle in degrees as :py:class:`Angle`,</span>
<span class="sd">            :py:class:`GlobeAngle`, float or string.</span>
<span class="sd">            The string parsing is delegated to :py:class:`Angle`.</span>

<span class="sd">        :param hemi: The hemisphere label (&#39;N&#39;, &#39;S&#39;, &#39;E&#39; or &#39;W&#39;)</span>
<span class="sd">            Or.</span>
<span class="sd">            In the case of Angle or Float, this is the set of hemisphere</span>
<span class="sd">            alternatives. For Latitude provide &quot;NS&quot;; for Longitude provide &quot;EW&quot;.</span>
<span class="sd">            This must be folded into an Angle or a float value.</span>
<span class="sd">            Positive Angle or float means N or E.</span>
<span class="sd">            Negative Angle or float means S or W.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="n">GlobeAngle</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">deg</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hemi</span><span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">hemi</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="n">Angle</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">deg</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_hemisphere</span><span class="p">(</span> <span class="n">hemi</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="n">hemi</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="n">hemi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="o">=</span> <span class="n">value</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_hemisphere</span><span class="p">(</span> <span class="n">hemi</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="n">hemi</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">return</span>
        <span class="c1"># String parsing.</span>
        <span class="n">angle</span><span class="o">=</span> <span class="n">Angle</span><span class="p">(</span> <span class="n">value</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="o">=</span> <span class="n">angle</span><span class="o">.</span><span class="n">deg</span>
        <span class="k">if</span> <span class="n">angle</span><span class="o">.</span><span class="n">tail</span> <span class="ow">and</span> <span class="n">angle</span><span class="o">.</span><span class="n">tail</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;N&quot;</span><span class="p">,</span><span class="s2">&quot;S&quot;</span><span class="p">,</span><span class="s2">&quot;E&quot;</span><span class="p">,</span><span class="s2">&quot;W&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hemi</span><span class="o">=</span> <span class="n">angle</span><span class="o">.</span><span class="n">tail</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hemisphere</span><span class="p">(</span> <span class="n">hemi</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="n">hemi</span><span class="p">)</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">radians</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the angle in radians with appropriate sign based on hemisphere.</span>
<span class="sd">        W and S are negative values.</span>

<span class="sd">        :returns: angle in radians.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hemi</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;W&quot;</span><span class="p">,</span><span class="s2">&quot;S&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="o">-</span><span class="nb">super</span><span class="p">(</span><span class="n">GlobeAngle</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">radians</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">GlobeAngle</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">radians</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dms</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the angle as a (D, M, S, Hemisphere).</span>

<span class="sd">        :return: (d, m, s, hemisphere) 4-tuple.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">GlobeAngle</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">dms</span> <span class="o">+</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">hemi</span><span class="p">,</span> <span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sdeg</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a signed angle: positive N or E, negative S or W.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hemi</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;S&quot;</span><span class="p">,</span> <span class="s2">&quot;W&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">deg</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">hemi</span>
</pre></div>
</div>
</section>
<section id="old-rhumb-line-range-and-bearing">
<h3>Old Rhumb-Line Range and Bearing<a class="headerlink" href="#old-rhumb-line-range-and-bearing" title="Permalink to this headline">¶</a></h3>
<p>This is <em>not</em> what we’re using. This is an alternative that uses
a more sophsticated Rhumb line computation. The increased accuracy
isn’t important enough to use.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">range_bearing</span><span class="p">(</span><span class="n">p1</span><span class="p">:</span> <span class="n">LatLon</span><span class="p">,</span> <span class="n">p2</span><span class="p">:</span> <span class="n">LatLon</span><span class="p">,</span> <span class="n">R</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">NM</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
    <span class="n">lat1</span> <span class="o">=</span> <span class="n">p1</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">radians</span>
    <span class="n">lat2</span> <span class="o">=</span> <span class="n">p2</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">radians</span>
    <span class="n">dLat</span> <span class="o">=</span> <span class="n">lat2</span> <span class="o">-</span> <span class="n">lat1</span>
    <span class="n">dPhi</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">lat2</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">lat1</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">))</span>
    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dPhi</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1.0E-6</span><span class="p">:</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">lat1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">dLat</span><span class="o">/</span><span class="n">dPhi</span>
    <span class="n">lon1</span> <span class="o">=</span> <span class="n">p1</span><span class="o">.</span><span class="n">lon</span><span class="o">.</span><span class="n">radians</span>
    <span class="n">lon2</span> <span class="o">=</span> <span class="n">p2</span><span class="o">.</span><span class="n">lon</span><span class="o">.</span><span class="n">radians</span>
    <span class="n">dLon</span> <span class="o">=</span> <span class="n">lon2</span> <span class="o">-</span> <span class="n">lon1</span>
    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dLon</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">:</span>
        <span class="n">dLon</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">-</span><span class="n">dLon</span><span class="p">)</span> <span class="k">if</span> <span class="n">dLon</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">+</span><span class="n">dLon</span><span class="p">)</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">dLat</span><span class="o">*</span><span class="n">dLat</span> <span class="o">+</span> <span class="n">q</span><span class="o">*</span><span class="n">q</span><span class="o">*</span><span class="n">dLon</span><span class="o">*</span><span class="n">dLon</span><span class="p">)</span> <span class="o">*</span> <span class="n">R</span>
    <span class="n">brng</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">dLon</span><span class="p">,</span> <span class="n">dPhi</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">brng</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">brng</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">+</span><span class="n">brng</span>
    <span class="n">theta</span> <span class="o">=</span> <span class="n">Angle</span><span class="p">(</span><span class="n">brng</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">d</span><span class="p">,</span> <span class="n">theta</span>
</pre></div>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Navtools</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#actors">Actors</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#use-cases">Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#solution-overview">Solution Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#architecture">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#consequences">Consequences</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#references">References</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Navigation Calculations Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="planning.html">Route Planning Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysis.html">Track Analysis Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="igrf11.html">International Geomagnetic Reference Field Module</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="introduction.html" title="previous chapter">Overview</a></li>
      <li>Next: <a href="planning.html" title="next chapter">Route Planning Application</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, S.Lott.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/navigation.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>