
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>navigation – Navigation Calculations &#8212; Navtools 2021.08.29 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="lowrance_usr – Lowrance USR File Parser" href="lowrance_usr.html" />
    <link rel="prev" title="waypoint_merge – Waypoint and Route Merge Application" href="waypoint_merge.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="navigation-navigation-calculations">
<h1><code class="xref py py-mod docutils literal notranslate"><span class="pre">navigation</span></code> – Navigation Calculations<a class="headerlink" href="#navigation-navigation-calculations" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="#module-navtools.navigation" title="navtools.navigation"><code class="xref py py-mod docutils literal notranslate"><span class="pre">navtools.navigation</span></code></a> module computes range and bearing between two points.
It leverages the <a class="reference internal" href="igrf.html#module-navtools.igrf" title="navtools.igrf"><code class="xref py py-mod docutils literal notranslate"><span class="pre">navtools.igrf</span></code></a> module to compute compass bearing from
true bearing.</p>
<p>See the Aviation Formulary: <a class="reference external" href="http://edwilliams.org/avform147.htm">http://edwilliams.org/avform147.htm</a> for a number of useful formulae
and examples.</p>
<p>Also see <a class="reference external" href="http://www.movable-type.co.uk/scripts/latlong.html">http://www.movable-type.co.uk/scripts/latlong.html</a>, © 2002-2010 Chris Veness.</p>
<section id="distance-bearing-calculation">
<span id="calc-range-bearing"></span><h2>Distance/Bearing Calculation<a class="headerlink" href="#distance-bearing-calculation" title="Permalink to this headline">¶</a></h2>
<p>These are based on the equirectangular approximation for distance.
This the loxodrome or rhumb line.</p>
<p>See <a class="reference external" href="http://edwilliams.org/avform147.htm#flat">http://edwilliams.org/avform147.htm#flat</a>.</p>
<p>Generally,
the <span class="math notranslate nohighlight">\(\phi\)</span> values are N-S latitude, and <span class="math notranslate nohighlight">\(\lambda\)</span> values are E-W longitude.</p>
<p>This means <span class="math notranslate nohighlight">\((\phi_0, \lambda_0)\)</span> and <span class="math notranslate nohighlight">\((\phi_1, \lambda_1)\)</span>
are the two points we’re navigating between.</p>
<p>The distance, <span class="math notranslate nohighlight">\(d\)</span>, is given by the following computation:</p>
<div class="math notranslate nohighlight">
\[\begin{split}x &amp;= R \times \Delta \lambda \times \cos \frac{\Delta \phi}{2} \\
y &amp;= R \times \Delta \phi \\
d &amp;= \sqrt{x^2 + y^2}\end{split}\]</div>
<p>We <em>could</em> fine-tune this with <span class="math notranslate nohighlight">\(R_y\)</span> and <span class="math notranslate nohighlight">\(R_x\)</span> radius
of curvature values. We don’t need answers closer than 10%, so we skip this
in the implementation.</p>
<p>The implementation does not compute the <span class="math notranslate nohighlight">\(R_y\)</span>  flattening effect on the north-south component of a distance;
nor does it compute the <span class="math notranslate nohighlight">\(R_x\)</span> flattening effect on east-west component of a distance.</p>
<div class="math notranslate nohighlight">
\[\begin{split}R_y &amp;= a \times \frac{1-e^2}{\bigl(1 - e^2 \times \sin(\phi_0)^2\bigr)^\frac{3}{2}} \\
R_x &amp;= a \times \frac{1}{\sqrt{1 - e^2 \times \sin(\phi_0)^2}}\end{split}\]</div>
<p>Where</p>
<p><code class="docutils literal notranslate"><span class="pre">a</span></code> is the equatorial radius of the earth:</p>
<ul class="simple">
<li><p>a=6378.137000 km for WGS84</p></li>
<li><p>a=3958.761 miles</p></li>
<li><p>a=3440.069 nautical miles, but 180*60/pi can be more useful.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">e^2=f*(2-f)</span></code> is the eccentricity, a function of the flattening factor, f=1/298.257223563, for WGS84.</p>
<div class="math notranslate nohighlight">
\[e^2 = f\times(2-f) = 0.0066943799901413165\]</div>
<p>See <a class="reference external" href="https://en.wikipedia.org/wiki/World_Geodetic_System">https://en.wikipedia.org/wiki/World_Geodetic_System</a> for more details.</p>
<p>The bearing, <span class="math notranslate nohighlight">\(\theta\)</span> is given by this formula.</p>
<div class="math notranslate nohighlight">
\[\theta = \arctan \frac{x} {y} \mod 2 \pi\]</div>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>Suppose point 1 is LAX: (33deg 57min N, 118deg 24min W)</p>
<p>Suppose point 2 is JFK: (40deg 38min N,  73deg 47min W)</p>
<p>d = 0.629650 radians = 2164.6 nm
theta = 1.384464 radians = 79.32 degrees</p>
<p>Conversely,
2164.6nm (0.629650 radians) on a rhumbline course of 79.3 degrees (1.384464 radians) starting at LAX
should arrive at JFK.</p>
</section>
</section>
<section id="destination-calculation">
<span id="calc-destination"></span><h2>Destination Calculation<a class="headerlink" href="#destination-calculation" title="Permalink to this headline">¶</a></h2>
<p>This is the direct Rhumb-line formula.
From <span class="math notranslate nohighlight">\((\phi_1, \lambda_1)\)</span> in direction <span class="math notranslate nohighlight">\(\theta\)</span> for distance <span class="math notranslate nohighlight">\(d\)</span>.</p>
<p>Generally,
the <span class="math notranslate nohighlight">\(\phi\)</span> values are N-S latitude, and <span class="math notranslate nohighlight">\(\lambda\)</span> values are E-W longitude.</p>
<p>The steps:</p>
<ol class="arabic">
<li><p>Compute new latitude.</p>
<div class="math notranslate nohighlight">
\[\phi_d =  \phi_1 + d \cos \theta\]</div>
</li>
<li><p>Sanity Check.</p>
<div class="math notranslate nohighlight">
\[\lvert \phi_d \rvert \leq \frac{\pi}{2}\]</div>
</li>
<li><p>How much northing? Too little? We’re on an E-W line and a simplification avoids
a fraction with terms near zero. A lot? We’re not an a simple E-W line.</p>
<div class="math notranslate nohighlight">
\[\begin{split}q = \begin{cases}
\cos \phi_1 &amp;\textbf{if $\lvert \phi_d - \phi_1 \rvert &lt; \sqrt{\epsilon}$} \\
\phi_d - \phi_1 / \log {\dfrac{\tan(\tfrac{\phi_d}{2}+\tfrac{\pi}{4})}{\tan(\tfrac{\phi_1}{2}+\tfrac{\pi}{4})}}  &amp;\textbf{otherwise}
\end{cases}\end{split}\]</div>
</li>
<li><p>Compute new Longitude</p>
<div class="math notranslate nohighlight">
\[\begin{split}\Delta \lambda &amp;= d \times \frac{\sin(\theta)}{q} \\
\lambda_d &amp;= (\lambda_1 + \Delta \lambda + \pi \mod 2\pi) - \pi\end{split}\]</div>
</li>
</ol>
</section>
<section id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h2>
<p>Here’s the UML overview of this module.</p>
<p class="plantuml">
<img src="_images/plantuml-6856425681eca3728ad5543e17b1e89f46600621.png" alt="&#64;startuml
'navtools.navigation'
allow_mixing

component navigation {

    class AngleParser {
        {static} sign(str) : int
        {static} parse(str) : str
    }

    class float

    class Angle {
        {static} fromstring(str) : str
    }

    float &lt;|-- Angle

    Angle --&gt; AngleParser

    class Lat

    class Lon

    Angle &lt;|-- Lat
    Angle &lt;|-- Lon

    class LatLon {
        lat : Lat
        lon : Lon
    }

    LatLon::lat -- Lat
    LatLon::lon -- Lon
}

component igrf

navigation ..&gt; igrf

&#64;enduml"/>
</p>
<span class="target" id="module-navtools.navigation"></span><section id="angleparser">
<h3>AngleParser<a class="headerlink" href="#angleparser" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="navtools.navigation.AngleParser">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">AngleParser</span></span><a class="headerlink" href="#navtools.navigation.AngleParser" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a sting representation of a latitude or longitude.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">AngleParser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&quot;76.123N&quot;</span><span class="p">)</span>
<span class="go">76.123</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AngleParser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&quot;76.123S&quot;</span><span class="p">)</span>
<span class="go">-76.123</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">AngleParser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&quot;Due North&quot;</span><span class="p">)</span> 
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">Cannot parse &#39;Due North&#39;</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.AngleParser.dms_pat">
<span class="sig-name descname"><span class="pre">dms_pat</span></span><em class="property"> <span class="pre">=</span> <span class="pre">re.compile('(\\d+)\\D+(\\d+)\\D+(\\d+)[^NEWSnews]*([NEWSnews]?)')</span></em><a class="headerlink" href="#navtools.navigation.AngleParser.dms_pat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.AngleParser.dm_pat">
<span class="sig-name descname"><span class="pre">dm_pat</span></span><em class="property"> <span class="pre">=</span> <span class="pre">re.compile('(\\d+)\\D+(\\d+\\.\\d+)[^NEWSnews]*([NEWSnews]?)')</span></em><a class="headerlink" href="#navtools.navigation.AngleParser.dm_pat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.AngleParser.d_pat">
<span class="sig-name descname"><span class="pre">d_pat</span></span><em class="property"> <span class="pre">=</span> <span class="pre">re.compile('(\\d+\\.\\d+)[^NEWSnews]*([NEWSnews]?)')</span></em><a class="headerlink" href="#navtools.navigation.AngleParser.d_pat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.AngleParser.sign">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">sign</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">txt</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">int</span><a class="headerlink" href="#navtools.navigation.AngleParser.sign" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.AngleParser.parse">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">float</span><a class="headerlink" href="#navtools.navigation.AngleParser.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses a text value, returning signed degrees as a float value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> – text to parse</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>float degrees or a <code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code> exception.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="angle-class-hierarchy">
<h3>Angle class hierarchy<a class="headerlink" href="#angle-class-hierarchy" title="Permalink to this headline">¶</a></h3>
<p>The superclass, <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">navtools.navigation.Angle</span></code></a>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="navtools.navigation.Angle">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">Angle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#navtools.navigation.Angle" title="Permalink to this definition">¶</a></dt>
<dd><p>A signed angle in radians; the superclass for Lat and Lon.
These are relative to the equator or the prime meridian.
In that sense, they aren’t completely generic angles; they’re restricted in their
meaning.</p>
<p>Currently, we extend <code class="docutils literal notranslate"><span class="pre">float</span></code>. This leads to the following</p>
<blockquote>
<div><p>DeprecationWarning: Angle.__float__ returned non-float (type Angle).
The ability to return an instance of a strict subclass of float is deprecated,
and may be removed in a future version of Python.</p>
</div></blockquote>
<p>This suggests we need to switch to a separate class that implements <code class="docutils literal notranslate"><span class="pre">numbers.Real</span></code>.
This would “wrap” the internal <code class="docutils literal notranslate"><span class="pre">float</span></code> object.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Angle</span><span class="p">(</span><span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Angle</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">cast</span><span class="p">(</span><span class="n">Angle</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>
    <span class="n">etc</span><span class="o">.</span>
</pre></div>
</div>
<p>This class has lots of conversions to DMS.
A subclass can treat the sign (“h”) as the hemisphere,
using “N”, “S”, “E”, or “W”. Lat uses “N”/”S”, Lon uses “E”/”W”.</p>
<p>Note that we have to “prettify” some values to
remove annoying 10E-16 noise bits that arise sometimes.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Angle</span><span class="p">(</span><span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="go">-0.524</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">radians</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="go">-0.524</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="go">-30.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">sdeg</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="go">-30.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="go">-30.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">dm</span>
<span class="go">(-30, 0.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">dms</span>
<span class="go">(-30, 0, 0.0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">h</span>
<span class="go">&#39;-&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">r</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="go">-0.524</span>
</pre></div>
</div>
<p><strong>Formatter</strong>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fmt</span><span class="p">,</span> <span class="n">prop</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">_rewrite</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%02.0d</span><span class="s2">° %2.5m&#39;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fmt</span>
<span class="go">&quot;{d:02.0f}° {m:2.5f}&#39;&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">prop</span><span class="p">)</span>
<span class="go">[&#39;d&#39;, &#39;m&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;Lat: {0:</span><span class="si">%02.0d</span><span class="s2">° %6.3m&#39;}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">&quot;Lat: 30°  0.000&#39;&quot;</span>
</pre></div>
</div>
<p><strong>Another round-off test</strong>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a2</span> <span class="o">=</span> <span class="n">Angle</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">12</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a2</span><span class="o">.</span><span class="n">dms</span>
<span class="go">(15, 0, 0.0)</span>
</pre></div>
</div>
<p><strong>Math</strong>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">a2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="go">-0.2618</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">((</span><span class="n">a</span><span class="o">+</span><span class="n">a2</span><span class="p">)</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">-15.0</span>
</pre></div>
</div>
<p>We define the core numeric object special methods, all of which simply appeal to the superclass
methods for the implementation. The results create new <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> objects,
otherwise, we behave just like a <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.Angle.parser">
<span class="sig-name descname"><span class="pre">parser</span></span><a class="headerlink" href="#navtools.navigation.Angle.parser" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#navtools.navigation.AngleParser" title="navtools.navigation.AngleParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">navtools.navigation.AngleParser</span></code></a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.fromdegrees">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">fromdegrees</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deg</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hemisphere</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.fromdegrees" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> from a numeric value,
which must be degrees.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>deg</strong> – numeric degrees value.</p></li>
<li><p><strong>hemisphere</strong> – sign value, which can be encoded as
“N”, “S”, “E”, or “W”. If omitted, it’s positive.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> object.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">fromdegrees</span><span class="p">(</span><span class="mi">45</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">0.7854</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">fromdegrees</span><span class="p">(</span><span class="mf">23.456</span><span class="p">,</span> <span class="s2">&quot;N&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">0.4094</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.fromdegmin">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">fromdegmin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deg</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hemisphere</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.fromdegmin" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.fromstring">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">fromstring</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.fromstring" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> from a string value,
which must be represent degrees, either as a simple
string value, or as a more complex value recognized by
the <a class="reference internal" href="#navtools.navigation.AngleParser" title="navtools.navigation.AngleParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">AngleParser</span></code></a> class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>deg</strong> – string degrees value.</p></li>
<li><p><strong>hemisphere</strong> – sign value, which can be encoded as
“N”, “S”, “E”, or “W”. If omitted, it’s positive.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> object.</p>
</dd>
</dl>
<p>We start by assuming the text value is simply
a string representation of a float.
If it isn’t, we use the <a class="reference internal" href="#navtools.navigation.AngleParser" title="navtools.navigation.AngleParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">AngleParser</span></code></a> class to parse the string.</p>
<p>A subclass might change the <a class="reference internal" href="#navtools.navigation.Angle.parser" title="navtools.navigation.Angle.parser"><code class="xref py py-data docutils literal notranslate"><span class="pre">parser</span></code></a> reference to use a different parser.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a0</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s2">&quot;-77.4325&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a0</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="go">-77.4325</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a1</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s2">&quot;37°28&#39;8</span><span class="se">\&quot;</span><span class="s2">N&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a1</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="go">37.4689</span>
</pre></div>
</div>
<p>Note use of prime and double-prime which are preferred over ‘ and “</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a2</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s2">&quot;77°25′57″W&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a2</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="go">-77.4325</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle.parse">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><a class="headerlink" href="#navtools.navigation.Angle.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for <a class="reference internal" href="#navtools.navigation.Angle.fromstring" title="navtools.navigation.Angle.fromstring"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fromstring()</span></code></a></p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Angle.radians">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">radians</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#navtools.navigation.Angle.radians" title="Permalink to this definition">¶</a></dt>
<dd><p>Angle in radians</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Angle.r">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">r</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#navtools.navigation.Angle.r" title="Permalink to this definition">¶</a></dt>
<dd><p>Angle in radians</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Angle.degrees">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">degrees</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#navtools.navigation.Angle.degrees" title="Permalink to this definition">¶</a></dt>
<dd><p>Angle in signed degrees</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Angle.sdeg">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">sdeg</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#navtools.navigation.Angle.sdeg" title="Permalink to this definition">¶</a></dt>
<dd><p>Angle in signed degrees</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Angle.deg">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">deg</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#navtools.navigation.Angle.deg" title="Permalink to this definition">¶</a></dt>
<dd><p>Angle in signed degrees</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Angle.dm">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dm</span></span><em class="property"><span class="pre">:</span> <span class="pre">tuple</span></em><a class="headerlink" href="#navtools.navigation.Angle.dm" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(d, m) tuple of signed values</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Angle.dms">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dms</span></span><em class="property"><span class="pre">:</span> <span class="pre">tuple</span></em><a class="headerlink" href="#navtools.navigation.Angle.dms" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(d, m, s) tuple of signed values</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Angle.h">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">h</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#navtools.navigation.Angle.h" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#navtools.navigation.Angle.h" title="navtools.navigation.Angle.h"><code class="xref py py-meth docutils literal notranslate"><span class="pre">h()</span></code></a> property is the sign; the “hemisphere”.
A subclass like <a class="reference internal" href="#navtools.navigation.Lat" title="navtools.navigation.Lat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lat</span></code></a> and <a class="reference internal" href="#navtools.navigation.Lon" title="navtools.navigation.Lon"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lon</span></code></a> will
override this to provide a string instead of an int value.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>“+” or “-”</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.Angle.spec_pat">
<span class="sig-name descname"><span class="pre">spec_pat</span></span><em class="property"> <span class="pre">=</span> <span class="pre">re.compile('%([0-9\\.#\\+</span> <span class="pre">-]*)([dmshr])')</span></em><a class="headerlink" href="#navtools.navigation.Angle.spec_pat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.Angle.formatter">
<span class="sig-name descname"><span class="pre">formatter</span></span><em class="property"> <span class="pre">=</span> <span class="pre">&lt;string.Formatter</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#navtools.navigation.Angle.formatter" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Angle._rewrite">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">_rewrite</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">tuple</span><a class="headerlink" href="#navtools.navigation.Angle._rewrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrites a “%x” spec into a “{x:fmt}” format.
Returns the revised format at the set of properties
used.</p>
<p>There are several variant cases where we want
different kinds of display values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">%d</span> <span class="pre">%m</span> <span class="pre">%s</span></code> means that degrees and minutes are integer values.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%d</span> <span class="pre">%m</span></code> means that degrees is an int and m is a float.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%d</span></code> means that degrees is a float.</p></li>
</ul>
<p>To make this work, we note the pattern of  <code class="docutils literal notranslate"><span class="pre">{'d',</span> <span class="pre">'m',</span> <span class="pre">'s'}</span></code>, or <code class="docutils literal notranslate"><span class="pre">{'d',</span> <span class="pre">'m'}</span></code>, or <code class="docutils literal notranslate"><span class="pre">{'d'}</span></code>
and determine the appropriate mix of int or float values to include.</p>
</dd></dl>

</dd></dl>

<p>The Latitude subclass, <a class="reference internal" href="#navtools.navigation.Lat" title="navtools.navigation.Lat"><code class="xref py py-class docutils literal notranslate"><span class="pre">navtools.navigation.Lat</span></code></a>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="navtools.navigation.Lat">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">Lat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#navtools.navigation.Lat" title="Permalink to this definition">¶</a></dt>
<dd><p>Latitude Angle, normal to the equator.</p>
<p>Hemisphere text of “N” and “S”.
Two digits as the default format for degrees.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Lat</span><span class="o">.</span><span class="n">fromdegrees</span><span class="p">(</span><span class="mf">37.1234</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">repr</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">&#39;37°07.404′N&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Lat</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;37°07.404′N&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="go">37.1234</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Lat.fromdegrees">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">fromdegrees</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deg</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hemisphere</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Lat" title="navtools.navigation.Lat"><span class="pre">navtools.navigation.Lat</span></a><a class="headerlink" href="#navtools.navigation.Lat.fromdegrees" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> from a numeric value,
which must be degrees.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>deg</strong> – numeric degrees value.</p></li>
<li><p><strong>hemisphere</strong> – sign value, which can be encoded as
“N”, “S”, “E”, or “W”. If omitted, it’s positive.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> object.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">fromdegrees</span><span class="p">(</span><span class="mi">45</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">0.7854</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">fromdegrees</span><span class="p">(</span><span class="mf">23.456</span><span class="p">,</span> <span class="s2">&quot;N&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">0.4094</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Lat.fromstring">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">fromstring</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Lat" title="navtools.navigation.Lat"><span class="pre">navtools.navigation.Lat</span></a><a class="headerlink" href="#navtools.navigation.Lat.fromstring" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> from a string value,
which must be represent degrees, either as a simple
string value, or as a more complex value recognized by
the <a class="reference internal" href="#navtools.navigation.AngleParser" title="navtools.navigation.AngleParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">AngleParser</span></code></a> class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>deg</strong> – string degrees value.</p></li>
<li><p><strong>hemisphere</strong> – sign value, which can be encoded as
“N”, “S”, “E”, or “W”. If omitted, it’s positive.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> object.</p>
</dd>
</dl>
<p>We start by assuming the text value is simply
a string representation of a float.
If it isn’t, we use the <a class="reference internal" href="#navtools.navigation.AngleParser" title="navtools.navigation.AngleParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">AngleParser</span></code></a> class to parse the string.</p>
<p>A subclass might change the <code class="xref py py-data docutils literal notranslate"><span class="pre">parser</span></code> reference to use a different parser.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a0</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s2">&quot;-77.4325&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a0</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="go">-77.4325</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a1</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s2">&quot;37°28&#39;8</span><span class="se">\&quot;</span><span class="s2">N&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a1</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="go">37.4689</span>
</pre></div>
</div>
<p>Note use of prime and double-prime which are preferred over ‘ and “</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a2</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s2">&quot;77°25′57″W&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a2</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="go">-77.4325</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Lat.d">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">d</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#navtools.navigation.Lat.d" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Latitude in degrees.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Lat.h">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">h</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#navtools.navigation.Lat.h" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The hemisphere, “N” or “S”.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Lat.north">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">north</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#navtools.navigation.Lat.north" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>North latitude, positive “co-latitude”.
Range is 0 to pi instead of -pi/2 to +pi/2.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<p>The Longitude subclass, <a class="reference internal" href="#navtools.navigation.Lon" title="navtools.navigation.Lon"><code class="xref py py-class docutils literal notranslate"><span class="pre">navtools.navigation.Lon</span></code></a>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="navtools.navigation.Lon">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">Lon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">/</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#navtools.navigation.Lon" title="Permalink to this definition">¶</a></dt>
<dd><p>Longitude Angle, parallel to the equator</p>
<p>Hemisphere text of “E” and “W”.
Three digits as the default format for degrees.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Lon</span><span class="o">.</span><span class="n">fromdegrees</span><span class="p">(</span><span class="o">-</span><span class="mf">76.5678</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">repr</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">&#39;076°34.068′W&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Lon</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s1">&#39;076°34.068′W&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="go">-76.5678</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Lon.fromdegrees">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">fromdegrees</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deg</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hemisphere</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Lon" title="navtools.navigation.Lon"><span class="pre">navtools.navigation.Lon</span></a><a class="headerlink" href="#navtools.navigation.Lon.fromdegrees" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> from a numeric value,
which must be degrees.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>deg</strong> – numeric degrees value.</p></li>
<li><p><strong>hemisphere</strong> – sign value, which can be encoded as
“N”, “S”, “E”, or “W”. If omitted, it’s positive.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> object.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">fromdegrees</span><span class="p">(</span><span class="mi">45</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">0.7854</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">fromdegrees</span><span class="p">(</span><span class="mf">23.456</span><span class="p">,</span> <span class="s2">&quot;N&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="go">0.4094</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.Lon.fromstring">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">fromstring</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.Lon" title="navtools.navigation.Lon"><span class="pre">navtools.navigation.Lon</span></a><a class="headerlink" href="#navtools.navigation.Lon.fromstring" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> from a string value,
which must be represent degrees, either as a simple
string value, or as a more complex value recognized by
the <a class="reference internal" href="#navtools.navigation.AngleParser" title="navtools.navigation.AngleParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">AngleParser</span></code></a> class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>deg</strong> – string degrees value.</p></li>
<li><p><strong>hemisphere</strong> – sign value, which can be encoded as
“N”, “S”, “E”, or “W”. If omitted, it’s positive.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> object.</p>
</dd>
</dl>
<p>We start by assuming the text value is simply
a string representation of a float.
If it isn’t, we use the <a class="reference internal" href="#navtools.navigation.AngleParser" title="navtools.navigation.AngleParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">AngleParser</span></code></a> class to parse the string.</p>
<p>A subclass might change the <code class="xref py py-data docutils literal notranslate"><span class="pre">parser</span></code> reference to use a different parser.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a0</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s2">&quot;-77.4325&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a0</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="go">-77.4325</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a1</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s2">&quot;37°28&#39;8</span><span class="se">\&quot;</span><span class="s2">N&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a1</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="go">37.4689</span>
</pre></div>
</div>
<p>Note use of prime and double-prime which are preferred over ‘ and “</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a2</span> <span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="s2">&quot;77°25′57″W&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">a2</span><span class="o">.</span><span class="n">degrees</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="go">-77.4325</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Lon.d">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">d</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#navtools.navigation.Lon.d" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Longitude in degrees.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Lon.h">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">h</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#navtools.navigation.Lon.h" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The hemisphere, “E” or “W”.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.Lon.east">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">east</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#navtools.navigation.Lon.east" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>East longitude. Positive only.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="latlon-point">
<h3>LatLon point<a class="headerlink" href="#latlon-point" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="navtools.navigation.LatLon">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">LatLon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lat</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#navtools.navigation.Lat" title="navtools.navigation.Lat"><span class="pre">navtools.navigation.Lat</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lon</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#navtools.navigation.Lon" title="navtools.navigation.Lon"><span class="pre">navtools.navigation.Lon</span></a><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><span class="pre">navtools.navigation.Angle</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#navtools.navigation.LatLon" title="Permalink to this definition">¶</a></dt>
<dd><p>A latitude/longitude coordinate pair.
This is a glorified namedtuple with additional properties to
provide nicely-formatted results.</p>
<p>This includes input and output conversions.</p>
<p>Output conversions as degree-minute-second, degree-minute, and degree.
We return a tuple of two strings so that the application can use
these values to populate separate spreadsheet columns.</p>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lat</strong> – The latitude <a class="reference internal" href="#navtools.navigation.Lat" title="navtools.navigation.Lat"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lat</span></code></a>.</p></li>
<li><p><strong>lon</strong> – The longitude <a class="reference internal" href="#navtools.navigation.Lon" title="navtools.navigation.Lon"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lon</span></code></a>.</p></li>
<li><p><strong>dms</strong> – A pair of DMS strings.</p></li>
<li><p><strong>dm</strong> – A pair of DM strings.</p></li>
<li><p><strong>d</strong> – A pair of D strings.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.lat_dms_format">
<span class="sig-name descname"><span class="pre">lat_dms_format</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'{0:%02.0d</span> <span class="pre">%02.0m</span> <span class="pre">%04.1s%h}'</span></em><a class="headerlink" href="#navtools.navigation.LatLon.lat_dms_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.lon_dms_format">
<span class="sig-name descname"><span class="pre">lon_dms_format</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'{0:%03.0d</span> <span class="pre">%02.0m</span> <span class="pre">%04.1s%h}'</span></em><a class="headerlink" href="#navtools.navigation.LatLon.lon_dms_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.lat_dm_format">
<span class="sig-name descname"><span class="pre">lat_dm_format</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'{0:%02.0d</span> <span class="pre">%.3m%h}'</span></em><a class="headerlink" href="#navtools.navigation.LatLon.lat_dm_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.lon_dm_format">
<span class="sig-name descname"><span class="pre">lon_dm_format</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'{0:%03.0d</span> <span class="pre">%.3m%h}'</span></em><a class="headerlink" href="#navtools.navigation.LatLon.lon_dm_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.lat_d_format">
<span class="sig-name descname"><span class="pre">lat_d_format</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'{0:%06.3d%h}'</span></em><a class="headerlink" href="#navtools.navigation.LatLon.lat_d_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.lon_d_format">
<span class="sig-name descname"><span class="pre">lon_d_format</span></span><em class="property"> <span class="pre">=</span> <span class="pre">'{0:%07.3d%h}'</span></em><a class="headerlink" href="#navtools.navigation.LatLon.lon_d_format" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.dms">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dms</span></span><em class="property"><span class="pre">:</span> <span class="pre">tuple</span></em><a class="headerlink" href="#navtools.navigation.LatLon.dms" title="Permalink to this definition">¶</a></dt>
<dd><p>Long Degree Minute Second format.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A pair of strings of the form <code class="samp docutils literal notranslate"><em><span class="pre">ddd</span></em> <em><span class="pre">mm</span></em> <em><span class="pre">s.s</span></em><em><span class="pre">h</span></em></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.dm">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">dm</span></span><em class="property"><span class="pre">:</span> <span class="pre">tuple</span></em><a class="headerlink" href="#navtools.navigation.LatLon.dm" title="Permalink to this definition">¶</a></dt>
<dd><p>GPS-friendly Degree Minute format.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A pair of strings of the form <code class="samp docutils literal notranslate"><em><span class="pre">ddd</span></em> <em><span class="pre">m.mmm</span></em><em><span class="pre">h</span></em></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.d">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">d</span></span><em class="property"><span class="pre">:</span> <span class="pre">tuple</span></em><a class="headerlink" href="#navtools.navigation.LatLon.d" title="Permalink to this definition">¶</a></dt>
<dd><p>GPS-friendly Degree format.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A pair of strings of the form <code class="samp docutils literal notranslate"><em><span class="pre">ddd.ddd</span></em><em><span class="pre">h</span></em></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="navtools.navigation.LatLon.near">
<span class="sig-name descname"><span class="pre">near</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">other</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><span class="pre">navtools.navigation.LatLon</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">R</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">3440.069</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">float</span><a class="headerlink" href="#navtools.navigation.LatLon.near" title="Permalink to this definition">¶</a></dt>
<dd><p>Distance from another point.
This can be expensive to compute, a geocode
to do proximity tests can be more efficient.</p>
</dd></dl>

</dd></dl>

</section>
<section id="globals">
<h3>Globals<a class="headerlink" href="#globals" title="Permalink to this headline">¶</a></h3>
<dl class="py data">
<dt class="sig sig-object py" id="navtools.navigation.KM">
<span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">KM</span></span><a class="headerlink" href="#navtools.navigation.KM" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="navtools.navigation.MI">
<span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">MI</span></span><a class="headerlink" href="#navtools.navigation.MI" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py data">
<dt class="sig sig-object py" id="navtools.navigation.NM">
<span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">NM</span></span><a class="headerlink" href="#navtools.navigation.NM" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="range-and-bearing">
<h3>range and bearing<a class="headerlink" href="#range-and-bearing" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="navtools.navigation.range_bearing">
<span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">range_bearing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">p1</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><span class="pre">navtools.navigation.LatLon</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">p2</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><span class="pre">navtools.navigation.LatLon</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">R</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">3440.069</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">tuple</span><a class="headerlink" href="#navtools.navigation.range_bearing" title="Permalink to this definition">¶</a></dt>
<dd><p>Rhumb-line course from <code class="xref py py-data docutils literal notranslate"><span class="pre">p1</span></code> to <code class="xref py py-data docutils literal notranslate"><span class="pre">p2</span></code>.</p>
<p>See <a class="reference internal" href="#calc-range-bearing"><span class="std std-ref">Distance/Bearing Calculation</span></a>.
This is the equirectangular approximation.
Without even the minimal corrections for non-spherical Earth.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>p1</strong> – a <a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><code class="xref py py-class docutils literal notranslate"><span class="pre">LatLon</span></code></a> starting point</p></li>
<li><p><strong>p2</strong> – a <a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><code class="xref py py-class docutils literal notranslate"><span class="pre">LatLon</span></code></a> ending point</p></li>
<li><p><strong>R</strong> – radius of the earth in appropriate units;
default is nautical miles.
Values include <a class="reference internal" href="#navtools.navigation.KM" title="navtools.navigation.KM"><code class="xref py py-data docutils literal notranslate"><span class="pre">KM</span></code></a> for kilometers,
<a class="reference internal" href="#navtools.navigation.MI" title="navtools.navigation.MI"><code class="xref py py-data docutils literal notranslate"><span class="pre">MI</span></code></a> for statute miles and <a class="reference internal" href="#navtools.navigation.NM" title="navtools.navigation.NM"><code class="xref py py-data docutils literal notranslate"><span class="pre">NM</span></code></a> for nautical miles.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>2-tuple of range and bearing from p1 to p2.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="destination">
<h3>destination<a class="headerlink" href="#destination" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="navtools.navigation.destination">
<span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">destination</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">p1</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><span class="pre">navtools.navigation.LatLon</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">range</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bearing</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">R</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">3440.069</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><span class="pre">navtools.navigation.LatLon</span></a><a class="headerlink" href="#navtools.navigation.destination" title="Permalink to this definition">¶</a></dt>
<dd><p>Rhumb line destination given point, range and bearing.</p>
<p>See <a class="reference internal" href="#calc-destination"><span class="std std-ref">Destination Calculation</span></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>p1</strong> – a <a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><code class="xref py py-class docutils literal notranslate"><span class="pre">LatLon</span></code></a> starting point</p></li>
<li><p><strong>range</strong> – the distiance to travel.</p></li>
<li><p><strong>bearing</strong> – the direction of travel in degrees.</p></li>
<li><p><strong>R</strong> – radius of the earth in appropriate units;
default is nautical miles.
Values include <a class="reference internal" href="#navtools.navigation.KM" title="navtools.navigation.KM"><code class="xref py py-data docutils literal notranslate"><span class="pre">KM</span></code></a> for kilometers,
<a class="reference internal" href="#navtools.navigation.MI" title="navtools.navigation.MI"><code class="xref py py-data docutils literal notranslate"><span class="pre">MI</span></code></a> for statute miles and <a class="reference internal" href="#navtools.navigation.NM" title="navtools.navigation.NM"><code class="xref py py-data docutils literal notranslate"><span class="pre">NM</span></code></a> for nautical miles.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a <a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><code class="xref py py-class docutils literal notranslate"><span class="pre">LatLon</span></code></a> with the ending point.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="declination-or-variance">
<h3>declination (or variance)<a class="headerlink" href="#declination-or-variance" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt class="sig sig-object py" id="navtools.navigation.declination">
<span class="sig-prename descclassname"><span class="pre">navtools.navigation.</span></span><span class="sig-name descname"><span class="pre">declination</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">point</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><span class="pre">navtools.navigation.LatLon</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">date</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">datetime.date</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">float</span><a class="headerlink" href="#navtools.navigation.declination" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes standard declination for a given <a class="reference internal" href="#navtools.navigation.LatLon" title="navtools.navigation.LatLon"><code class="xref py py-class docutils literal notranslate"><span class="pre">LatLon</span></code></a>
point.</p>
<p><a class="reference external" href="http://www.ngdc.noaa.gov/geomag/models.shtml">http://www.ngdc.noaa.gov/geomag/models.shtml</a></p>
<p><a class="reference external" href="http://www.ngdc.noaa.gov/IAGA/vmod/igrf.html">http://www.ngdc.noaa.gov/IAGA/vmod/igrf.html</a></p>
<p>See <a class="reference internal" href="igrf.html#igrf"><span class="std std-ref">igrf – International Geomagnetic Reference Field</span></a> for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>point</strong> – LatLon point</p></li>
<li><p><strong>date</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.date</span></code> in question, default is today.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>declination as a float offset to an Angle.</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="historical-archive">
<h2>Historical Archive<a class="headerlink" href="#historical-archive" title="Permalink to this headline">¶</a></h2>
<p>The original <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> and <code class="xref py py-class docutils literal notranslate"><span class="pre">GlobeAngle</span></code> classes do things which are close
to correct. They included some needless complexity, however.
They worked in degrees (not radians) and implemented a lot of operations that could
have been inherited from <code class="docutils literal notranslate"><span class="pre">float</span></code>.</p>
<section id="angle-class-independent-of-float">
<h3>Angle class – independent of float<a class="headerlink" href="#angle-class-independent-of-float" title="Permalink to this headline">¶</a></h3>
<p>An <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> is a signed radians number, essentially equivalent
to <code class="docutils literal notranslate"><span class="pre">float</span></code>. The operators are include the flexibility to work with
<code class="docutils literal notranslate"><span class="pre">float</span></code> values, doing coercion to <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Angle</span><span class="p">(</span><span class="n">numbers</span><span class="o">.</span><span class="n">Real</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    An Angle, with conversion from several DMS notations,</span>
<span class="sd">    as well as from radians.  The angle can be reported as</span>
<span class="sd">    degrees, a (D, M, S) tuple or as a value in radians.</span>

<span class="sd">    :ivar deg: The angle in degrees.</span>

<span class="sd">    :ivar radians: The angle in radians</span>

<span class="sd">    :ivar dm: The angle as a (D, M) tuple</span>

<span class="sd">    :ivar dms: The angle as a (D, M, S) tuple</span>

<span class="sd">    :ivar tail: Any additional text found after parsing a string value.</span>
<span class="sd">            This may be a hemisphere indication that a subclass might want to use.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">dms_pat</span><span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span> <span class="sa">r</span><span class="s2">&quot;(\d+)\s+(\d+)\s+(\d+)(.*)&quot;</span> <span class="p">)</span>
    <span class="n">dm_pat</span><span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span> <span class="sa">r</span><span class="s2">&quot;(\d+)\s+(\d+\.\d+)(.*)&quot;</span> <span class="p">)</span>
    <span class="n">d_pat</span><span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span> <span class="sa">r</span><span class="s2">&quot;(\d+\.\d+)(.*)&quot;</span> <span class="p">)</span>
    <span class="n">navx_dmh_pat</span><span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span> <span class="s2">&quot;(</span><span class="se">\\</span><span class="s2">d+)</span><span class="se">\\</span><span class="s2">D+(</span><span class="se">\\</span><span class="s2">d+</span><span class="se">\\</span><span class="s2">.</span><span class="se">\\</span><span class="s2">d+)&#39;([NEWS])&quot;</span> <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">from_radians</span><span class="p">(</span> <span class="n">value</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create an Angle from radians.</span>

<span class="sd">        :param value: Angle in radians.</span>

<span class="sd">        Generally used like this::</span>

<span class="sd">            a = Angle.from_radians( float )</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="mi">180</span> <span class="o">*</span> <span class="n">value</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">value</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create an Angle from an Angle, float or string degrees.</span>

<span class="sd">        :param value: Angle in degrees as Angle, float or string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tail</span><span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="n">Angle</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">deg</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="nb">float</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="o">=</span> <span class="n">value</span>
            <span class="k">return</span>
        <span class="n">dms</span><span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">dms_pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span> <span class="n">value</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">dms</span><span class="p">:</span>
            <span class="n">d</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">dms</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span> <span class="nb">int</span><span class="p">(</span><span class="n">dms</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)),</span> <span class="nb">float</span><span class="p">(</span><span class="n">dms</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="n">m</span><span class="o">/</span><span class="mi">60</span> <span class="o">+</span> <span class="n">s</span><span class="o">/</span><span class="mi">3600</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tail</span><span class="o">=</span> <span class="n">dms</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">dm</span><span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">dm_pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span> <span class="n">value</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">dm</span><span class="p">:</span>
            <span class="n">d</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">dm</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span> <span class="nb">float</span><span class="p">(</span><span class="n">dm</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="n">m</span><span class="o">/</span><span class="mi">60</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tail</span><span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">d</span><span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">d_pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span> <span class="n">value</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">d</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tail</span><span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">navx</span><span class="o">=</span> <span class="n">Angle</span><span class="o">.</span><span class="n">navx_dmh_pat</span><span class="o">.</span><span class="n">match</span><span class="p">(</span> <span class="n">value</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">navx</span><span class="p">:</span>
            <span class="n">d</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">navx</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)),</span> <span class="nb">float</span><span class="p">(</span><span class="n">navx</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="n">m</span><span class="o">/</span><span class="mi">60</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tail</span><span class="o">=</span> <span class="n">navx</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Cannot parse Angle </span><span class="si">{0!r}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">radians</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the angle in radians.</span>

<span class="sd">        :returns: angle in radians.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">/</span> <span class="mi">180</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dm</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the angle as (D, M).</span>

<span class="sd">        :returns: (d, m) tuple</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sign</span><span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="o">+</span><span class="mi">1</span>
        <span class="n">ad</span><span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span>
        <span class="n">d</span><span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ad</span><span class="p">)</span>
        <span class="n">ms</span><span class="o">=</span> <span class="n">ad</span><span class="o">-</span><span class="n">d</span>
        <span class="k">return</span> <span class="n">d</span><span class="o">*</span><span class="n">sign</span><span class="p">,</span> <span class="mi">60</span><span class="o">*</span><span class="n">ms</span><span class="o">*</span><span class="p">(</span><span class="n">sign</span> <span class="k">if</span> <span class="n">d</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span><span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dms</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the angle as (D, M, S).</span>

<span class="sd">        :returns: (d, m, s) tuple</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sign</span><span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="o">+</span><span class="mi">1</span>
        <span class="n">ad</span><span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span>
        <span class="n">d</span><span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ad</span><span class="p">)</span>
        <span class="n">ms</span><span class="o">=</span> <span class="mi">60</span><span class="o">*</span><span class="p">(</span><span class="n">ad</span><span class="o">-</span><span class="n">d</span><span class="p">)</span>
        <span class="n">m</span><span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ms</span><span class="p">)</span>
        <span class="n">s</span><span class="o">=</span> <span class="nb">round</span><span class="p">((</span><span class="n">ms</span><span class="o">-</span><span class="n">m</span><span class="p">)</span><span class="o">*</span><span class="mi">60</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">d</span><span class="o">*</span><span class="n">sign</span><span class="p">,</span> <span class="n">m</span><span class="o">*</span><span class="p">(</span><span class="n">sign</span> <span class="k">if</span> <span class="n">d</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span><span class="p">),</span> <span class="n">s</span><span class="o">*</span><span class="p">(</span><span class="n">sign</span> <span class="k">if</span> <span class="n">d</span><span class="o">==</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">m</span><span class="o">==</span><span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Angle( </span><span class="si">{0.deg!r}</span><span class="s2"> )&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{0.deg:7.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="n">Angle</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span> <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="nb">float</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">+</span> <span class="n">other</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="n">Angle</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">-</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span> <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="nb">float</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">-</span> <span class="n">other</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="n">Angle</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">*</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span> <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="nb">float</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">*</span> <span class="n">other</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">def</span> <span class="nf">__div__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="n">Angle</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">/</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span> <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="nb">float</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">/</span> <span class="n">other</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">def</span> <span class="fm">__truediv__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__div__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">)</span>
    <span class="k">def</span> <span class="fm">__floordiv__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="n">Angle</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">//</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span> <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="nb">float</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">//</span> <span class="n">other</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">def</span> <span class="fm">__mod__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="n">Angle</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">%</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span> <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span><span class="nb">float</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">%</span> <span class="n">other</span> <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">NotImplemented</span>

    <span class="k">def</span> <span class="fm">__abs__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span> <span class="p">)</span>
    <span class="k">def</span> <span class="fm">__float__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span>
    <span class="k">def</span> <span class="nf">__trunc__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="n">trunc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span> <span class="p">)</span>
    <span class="k">def</span> <span class="nf">__ceil__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="p">)</span> <span class="p">)</span>
    <span class="k">def</span> <span class="nf">__floor__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="n">math</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="p">)</span> <span class="p">)</span>
    <span class="k">def</span> <span class="fm">__round__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">ndigits</span> <span class="p">):</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="nb">round</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="mi">0</span> <span class="p">)</span> <span class="p">)</span>
    <span class="k">def</span> <span class="fm">__neg__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="p">)</span>
    <span class="k">def</span> <span class="fm">__pos__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>
    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span>
    <span class="k">def</span> <span class="fm">__ne__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span>
    <span class="k">def</span> <span class="fm">__le__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span>
    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span>
    <span class="k">def</span> <span class="fm">__ge__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span>
    <span class="k">def</span> <span class="fm">__gt__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">deg</span>
    <span class="k">def</span> <span class="fm">__pow__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="n">Angle</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="o">**</span><span class="n">other</span> <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__radd__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">+</span><span class="bp">self</span>
    <span class="k">def</span> <span class="nf">__rdiv__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">def</span> <span class="fm">__rfloordiv__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">def</span> <span class="fm">__rmod__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">def</span> <span class="fm">__rmul__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">*</span><span class="bp">self</span>
    <span class="k">def</span> <span class="fm">__rpow__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>
    <span class="k">def</span> <span class="fm">__rtruediv__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">NotImplemented</span>
</pre></div>
</div>
</section>
<section id="old-globeangle-class">
<h3>Old GlobeAngle Class<a class="headerlink" href="#old-globeangle-class" title="Permalink to this headline">¶</a></h3>
<p>We need to extend the simple <a class="reference internal" href="#navtools.navigation.Angle" title="navtools.navigation.Angle"><code class="xref py py-class docutils literal notranslate"><span class="pre">Angle</span></code></a> to include globe hemisphere
information so that the simple angle (in degrees or radians)
can be parsed and presented in proper N, S, E and W hemisphere
notation.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This doesn’t handle signs properly.</p>
<p>Note that we do not handle sign well as a conversion from a string.
This is because this angle is axis-independent.  Since it isn’t
aware of being a longitude or a latitude, it doesn’t know which
hemisphere code to use.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">GlobeAngle</span><span class="p">(</span> <span class="n">Angle</span> <span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An Angle which includes hemisphere information: N, S, E or W.</span>

<span class="sd">    :ivar deg: The angle in degrees.</span>

<span class="sd">    :ivar radians: The angle in radians</span>

<span class="sd">    :ivar dm: The angle as a (D, M) tuple</span>

<span class="sd">    :ivar dms: The angle as a (D, M, S, H) tuple</span>

<span class="sd">    :ivar hemi: The hemisphere (&quot;N&quot;, &quot;S&quot;, &quot;E&quot; or &quot;W&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_hemisphere</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">hemi</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">None</span> <span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">hemi</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hemi</span><span class="o">=</span> <span class="n">hemi</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">hemi</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hemi</span><span class="o">=</span> <span class="n">hemi</span><span class="p">[</span><span class="mi">0</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span> <span class="s2">&quot;Cannot parse GlobeAngle</span><span class="si">{0!r}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">debug</span><span class="p">)</span> <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">hemi</span><span class="o">=</span><span class="kc">None</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a GlobeAngle from an GlobeAngle, Angle or float degrees.</span>
<span class="sd">        This will delegate construction to Angle for parsing the</span>
<span class="sd">        various strings that could be present. An Angle string may</span>
<span class="sd">        include a &quot;tail&quot; of N, S, E or W, making the hemisphere</span>
<span class="sd">        irrelevant.</span>

<span class="sd">        :param value: Angle in degrees as :py:class:`Angle`,</span>
<span class="sd">            :py:class:`GlobeAngle`, float or string.</span>
<span class="sd">            The string parsing is delegated to :py:class:`Angle`.</span>

<span class="sd">        :param hemi: The hemisphere label (&#39;N&#39;, &#39;S&#39;, &#39;E&#39; or &#39;W&#39;)</span>
<span class="sd">            Or.</span>
<span class="sd">            In the case of Angle or Float, this is the set of hemisphere</span>
<span class="sd">            alternatives. For Latitude provide &quot;NS&quot;; for Longitude provide &quot;EW&quot;.</span>
<span class="sd">            This must be folded into an Angle or a float value.</span>
<span class="sd">            Positive Angle or float means N or E.</span>
<span class="sd">            Negative Angle or float means S or W.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="n">GlobeAngle</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">deg</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hemi</span><span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">hemi</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="n">Angle</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">deg</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_hemisphere</span><span class="p">(</span> <span class="n">hemi</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="n">hemi</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="nb">float</span><span class="p">)</span> <span class="ow">and</span> <span class="n">hemi</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="o">=</span> <span class="n">value</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_hemisphere</span><span class="p">(</span> <span class="n">hemi</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="n">hemi</span><span class="p">)</span> <span class="p">)</span>
            <span class="k">return</span>
        <span class="c1"># String parsing.</span>
        <span class="n">angle</span><span class="o">=</span> <span class="n">Angle</span><span class="p">(</span> <span class="n">value</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="o">=</span> <span class="n">angle</span><span class="o">.</span><span class="n">deg</span>
        <span class="k">if</span> <span class="n">angle</span><span class="o">.</span><span class="n">tail</span> <span class="ow">and</span> <span class="n">angle</span><span class="o">.</span><span class="n">tail</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;N&quot;</span><span class="p">,</span><span class="s2">&quot;S&quot;</span><span class="p">,</span><span class="s2">&quot;E&quot;</span><span class="p">,</span><span class="s2">&quot;W&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hemi</span><span class="o">=</span> <span class="n">angle</span><span class="o">.</span><span class="n">tail</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_hemisphere</span><span class="p">(</span> <span class="n">hemi</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="n">hemi</span><span class="p">)</span> <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">radians</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the angle in radians with appropriate sign based on hemisphere.</span>
<span class="sd">        W and S are negative values.</span>

<span class="sd">        :returns: angle in radians.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hemi</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;W&quot;</span><span class="p">,</span><span class="s2">&quot;S&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="o">-</span><span class="nb">super</span><span class="p">(</span><span class="n">GlobeAngle</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">radians</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">GlobeAngle</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">radians</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dms</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the angle as a (D, M, S, Hemisphere).</span>

<span class="sd">        :return: (d, m, s, hemisphere) 4-tuple.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">GlobeAngle</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">dms</span> <span class="o">+</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">hemi</span><span class="p">,</span> <span class="p">)</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">sdeg</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a signed angle: positive N or E, negative S or W.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hemi</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;S&quot;</span><span class="p">,</span> <span class="s2">&quot;W&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">deg</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">deg</span>
    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">hemi</span>
</pre></div>
</div>
</section>
<section id="old-rhumb-line-range-and-bearing">
<h3>Old Rhumb-Line Range and Bearing<a class="headerlink" href="#old-rhumb-line-range-and-bearing" title="Permalink to this headline">¶</a></h3>
<p>This is <em>not</em> what we’re using. This is an alternative that uses
a more sophsticated Rhumb line computation. The increased accuracy
isn’t important enough to use.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">range_bearing</span><span class="p">(</span><span class="n">p1</span><span class="p">:</span> <span class="n">LatLon</span><span class="p">,</span> <span class="n">p2</span><span class="p">:</span> <span class="n">LatLon</span><span class="p">,</span> <span class="n">R</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">NM</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
    <span class="n">lat1</span> <span class="o">=</span> <span class="n">p1</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">radians</span>
    <span class="n">lat2</span> <span class="o">=</span> <span class="n">p2</span><span class="o">.</span><span class="n">lat</span><span class="o">.</span><span class="n">radians</span>
    <span class="n">dLat</span> <span class="o">=</span> <span class="n">lat2</span> <span class="o">-</span> <span class="n">lat1</span>
    <span class="n">dPhi</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">lat2</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">lat1</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">))</span>
    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dPhi</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1.0E-6</span><span class="p">:</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">lat1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">dLat</span><span class="o">/</span><span class="n">dPhi</span>
    <span class="n">lon1</span> <span class="o">=</span> <span class="n">p1</span><span class="o">.</span><span class="n">lon</span><span class="o">.</span><span class="n">radians</span>
    <span class="n">lon2</span> <span class="o">=</span> <span class="n">p2</span><span class="o">.</span><span class="n">lon</span><span class="o">.</span><span class="n">radians</span>
    <span class="n">dLon</span> <span class="o">=</span> <span class="n">lon2</span> <span class="o">-</span> <span class="n">lon1</span>
    <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dLon</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">:</span>
        <span class="n">dLon</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">-</span><span class="n">dLon</span><span class="p">)</span> <span class="k">if</span> <span class="n">dLon</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">+</span><span class="n">dLon</span><span class="p">)</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">dLat</span><span class="o">*</span><span class="n">dLat</span> <span class="o">+</span> <span class="n">q</span><span class="o">*</span><span class="n">q</span><span class="o">*</span><span class="n">dLon</span><span class="o">*</span><span class="n">dLon</span><span class="p">)</span> <span class="o">*</span> <span class="n">R</span>
    <span class="n">brng</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">dLon</span><span class="p">,</span> <span class="n">dPhi</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">brng</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">brng</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">+</span><span class="n">brng</span>
    <span class="n">theta</span> <span class="o">=</span> <span class="n">Angle</span><span class="p">(</span><span class="n">brng</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">d</span><span class="p">,</span> <span class="n">theta</span>
</pre></div>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Navtools</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Overview and Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#actors">Actors</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#use-cases">Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#container-overview">Container Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#component-architecture">Component Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#other-notes">Other Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html#references">References</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="planning.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">planning</span></code> – Route Planning Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysis.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">analysis</span></code> – Track Analysis Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="opencpn_table.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">opencpn_table</span></code> – OpenCPN Table Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="waypoint_merge.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">waypoint_merge</span></code> – Waypoint and Route Merge Application</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">navigation</span></code> – Navigation Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="lowrance_usr.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lowrance_usr</span></code> – Lowrance USR File Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="olc.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">olc</span></code> – OLC Geocoding</a></li>
<li class="toctree-l1"><a class="reference internal" href="igrf.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">igrf</span></code> – International Geomagnetic Reference Field</a></li>
<li class="toctree-l1"><a class="reference internal" href="solar.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">solar</span></code> – Sunrise and Sunset</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="waypoint_merge.html" title="previous chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">waypoint_merge</span></code> – Waypoint and Route Merge Application</a></li>
      <li>Next: <a href="lowrance_usr.html" title="next chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lowrance_usr</span></code> – Lowrance USR File Parser</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, S.Lott.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/navigation.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>